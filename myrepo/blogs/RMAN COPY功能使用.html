<html>
<head>
  <title>RMAN COPY功能使用</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="527"/>
<h1>RMAN COPY功能使用</h1>

<div>
<span><div><span style="font-size: 11pt; font-weight: bold;">RMAN COPY功能使用</span></div><div><span style="font-size: 11pt;">copy出来的文件和原始文件大小是一样的，要使用copy，只需要在backup 后面加上as copy即可</span></div><div><span style="font-size: 11pt; color: rgb(227, 0, 0);">copy 和 backup as copy 应该是一样的.</span></div><div><span style="font-size: 11pt; color: rgb(227, 0, 0);-en-paragraph:true;">copy 和 backup 是完全不一样的</span></div><div style="word-wrap: break-word; margin: 5px 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="word-wrap: break-word; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11pt; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">1.COPY DATABASE</span></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">RMAN&gt; backup as copy database format '/oracle/11g/backup/orcl/backup04/full_db_cp_%s_%t.bak';</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Starting backup at 16-MAY-18</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">using channel ORA_DISK_1</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">channel ORA_DISK_1: starting datafile copy</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">input datafile file number=00001 name=/oracle/11g/oradata/mysql_master_1003306/system01.dbf</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">output file name=/oracle/11g/backup/orcl/backup04/full_db_cp_889_976311931.bak tag=TAG20180516T214531 RECID=4 STAMP=976311947</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">channel ORA_DISK_1: datafile copy complete, elapsed time: 00:00:25</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">channel ORA_DISK_1: starting datafile copy</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">input datafile file number=00002 name=/oracle/11g/oradata/mysql_master_1003306/sysaux01.dbf</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">output file name=/oracle/11g/backup/orcl/backup04/full_db_cp_890_976311956.bak tag=TAG20180516T214531 RECID=5 STAMP=976311969</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">channel ORA_DISK_1: datafile copy complete, elapsed time: 00:00:15</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">channel ORA_DISK_1: starting datafile copy</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">input datafile file number=00003 name=/oracle/11g/oradata/mysql_master_1003306/undotbs01.dbf</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">output file name=/oracle/11g/backup/orcl/backup04/full_db_cp_891_976311971.bak tag=TAG20180516T214531 RECID=6 STAMP=976311973</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">channel ORA_DISK_1: datafile copy complete, elapsed time: 00:00:03</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">channel ORA_DISK_1: starting datafile copy</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">input datafile file number=00004 name=/oracle/11g/oradata/mysql_master_1003306/users01.dbf</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">output file name=/oracle/11g/backup/orcl/backup04/full_db_cp_892_976311974.bak tag=TAG20180516T214531 RECID=7 STAMP=976311975</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">channel ORA_DISK_1: datafile copy complete, elapsed time: 00:00:01</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Finished backup at 16-MAY-18</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Starting Control File and SPFILE Autobackup at 16-MAY-18</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">piece handle=/oracle/11g/flash_recovery_area/MYSQL_MA/autobackup/2018_05_16/o1_mf_s_976311976_fhsqq8yt_.bkp comment=NONE</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Finished Control File and SPFILE Autobackup at 16-MAY-18</span></div></div><div style="word-wrap: break-word; margin: 5px 0px; padding: 0px; font-size: 12px; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">RMAN&gt; list copy;</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">specification does not match any control file copy in the repository</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">specification does not match any archived log in the repository</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">List of Datafile Copies</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">=======================</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Key     File S Completion Time Ckp SCN    Ckp Time      </span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">------- ---- - --------------- ---------- ---------------</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">10934   1    A 16-MAY-18       1479462    16-MAY-18     </span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">        Name: /oracle/11g/backup/orcl/backup04/full_db_cp_889_976311931.bak</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">        Tag: TAG20180516T214531</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">10935   2    A 16-MAY-18       1479473    16-MAY-18     </span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">        Name: /oracle/11g/backup/orcl/backup04/full_db_cp_890_976311956.bak</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">        Tag: TAG20180516T214531</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">10936   3    A 16-MAY-18       1479479    16-MAY-18     </span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">        Name: /oracle/11g/backup/orcl/backup04/full_db_cp_891_976311971.bak</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">        Tag: TAG20180516T214531</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">10937   4    A 16-MAY-18       1479481    16-MAY-18     </span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">        Name: /oracle/11g/backup/orcl/backup04/full_db_cp_892_976311974.bak</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">        Tag: TAG20180516T214531</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">10897   4    A 16-MAY-18       1479015    16-MAY-18     </span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">        Name: /oracle/11g/backup/orcl/users01.dbf</span></div><div><br/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">List of Control File Copies</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">===========================</span></div><div><br style="font-family: DejaVu Sans Mono; font-size: 11pt; color: rgb(0, 128, 0);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Key     S Completion Time Ckp SCN    Ckp Time      </span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">------- - --------------- ---------- ---------------</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">11054   A 16-MAY-18       1479626    16-MAY-18     </span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">        Name: /oracle/11g/controlfile_bak.ctl1</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">        Tag: TAG20180516T215031</span></div></div><div style="word-wrap: break-word; margin: 5px 0px; padding: 0px; font-size: 12px; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></div><div style="word-wrap: break-word; margin: 5px 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="word-wrap: break-word; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11pt; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">2.COPY TABLESPACE</span></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">RMAN&gt; backup as copy tablespace users;</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Starting backup at 16-MAY-18</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">using channel ORA_DISK_1</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">channel ORA_DISK_1: starting datafile copy</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">input datafile file number=00004 name=/oracle/11g/oradata/mysql_master_1003306/users01.dbf</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">output file name=/oracle/11g/flash_recovery_area/MYSQL_MA/datafile/o1_mf_users_fhsr6kvy_.dbf tag=TAG20180516T215425 RECID=10 STAMP=976312465</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">channel ORA_DISK_1: datafile copy complete, elapsed time: 00:00:01</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Finished backup at 16-MAY-18</span></div></div><div><br/></div><div><span style="word-wrap: break-word; font-weight: bold;">3.COPY DATAFILES</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">RMAN&gt; backup as copy datafile 1;</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Starting backup at 16-MAY-18</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">using channel ORA_DISK_1</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">channel ORA_DISK_1: starting datafile copy</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">input datafile file number=00001 name=/oracle/11g/oradata/mysql_master_1003306/system01.dbf</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">output file name=/oracle/11g/flash_recovery_area/MYSQL_MA/datafile/o1_mf_system_fhsr2b4c_.dbf tag=TAG20180516T215210 RECID=9 STAMP=976312346</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">channel ORA_DISK_1: datafile copy complete, elapsed time: 00:00:25</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Finished backup at 16-MAY-18</span></div><div><br/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">RMAN&gt; copy datafile 4 to '/oracle/11g/backup/orcl/datafile4_bak';</span></div><div><br style="font-family: DejaVu Sans Mono; font-size: 11pt; color: rgb(0, 128, 0);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Starting backup at 16-MAY-18</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">using channel ORA_DISK_1</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">channel ORA_DISK_1: starting datafile copy</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">input datafile file number=00004 name=/oracle/11g/oradata/mysql_master_1003306/users01.dbf</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">output file name=/oracle/11g/backup/orcl/datafile4_bak tag=TAG20180516T215628 RECID=11 STAMP=976312588</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">channel ORA_DISK_1: datafile copy complete, elapsed time: 00:00:01</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Finished backup at 16-MAY-18</span></div></div><div style="margin-top: 1em; margin-bottom: 1em;"><div><font style="font-size: 11pt;"><b><br/></b></font></div><div><font style="font-size: 11pt;"><b>删除copy</b></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">RMAN&gt; delete copy tag TAG20180516T215031;</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">released channel: ORA_DISK_1</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">allocated channel: ORA_DISK_1</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">channel ORA_DISK_1: SID=50 device type=DISK</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">specification does not match any datafile copy in the repository</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">List of Control File Copies</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">===========================</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Key     S Completion Time Ckp SCN    Ckp Time      </span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">------- - --------------- ---------- ---------------</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">11054   A 16-MAY-18       1479626    16-MAY-18     </span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">        Name: /oracle/11g/controlfile_bak.ctl1</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">        Tag: TAG20180516T215031</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Do you really want to delete the above objects (enter YES or NO)? y</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">deleted control file copy</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">control file copy file name=/oracle/11g/controlfile_bak.ctl1 RECID=8 STAMP=976312231</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Deleted 1 objects</span></div></div><div><br/></div></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="word-wrap: break-word; font-weight: bold;-en-paragraph:true;">二.COPY与BACKUP比较</span></div><div style="word-wrap: break-word; margin: 5px 0px; padding: 0px; font-size: 12px; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="word-wrap: break-word; font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-variant-caps: normal; font-variant-ligatures: normal;">ROOTDBA@ora11g&gt;create table t_cp tablespace ts01 as select * from dba_objects;</span></div><div style="word-wrap: break-word; margin: 5px 0px; padding: 0px; font-size: 12px; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="word-wrap: break-word; font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-variant-caps: normal; font-variant-ligatures: normal;">Table created.</span></div><div>Elapsed: 00:00:00.47</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">ROOTDBA@ora11g&gt;insert into t_cp select * from t_cp;</span></div><div style="word-wrap: break-word; margin: 5px 0px; padding: 0px; font-size: 12px; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="word-wrap: break-word; font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-variant-caps: normal; font-variant-ligatures: normal;">18185 rows created.</span></div><div>Elapsed: 00:00:00.08</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">ROOTDBA@ora11g&gt;commit;</span></div><div style="word-wrap: break-word; margin: 5px 0px; padding: 0px; font-size: 12px; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="word-wrap: break-word; font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-variant-caps: normal; font-variant-ligatures: normal;">ROOTDBA@ora11g&gt;truncate table t_cp ;</span></div><div style="word-wrap: break-word; margin: 5px 0px; padding: 0px; font-size: 12px; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="word-wrap: break-word; font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-variant-caps: normal; font-variant-ligatures: normal;">Table truncated.</span></div><div>Elapsed: 00:00:00.16</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">ROOTDBA@ora11g&gt;select segment_name,bytes/1024/1024 from user_segments where segment_name=’T_CP’;</span></div><div>SEGMENT_NAME                   BYTES/1024/1024</div><div>—————————— —————</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">T_CP                                     .0625</span></div><div style="word-wrap: break-word; margin: 5px 0px; padding: 0px; font-size: 12px; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="word-wrap: break-word; font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-variant-caps: normal; font-variant-ligatures: normal;">RMAN&gt; backup datafile 6 format ‘/u03/df_6_bk_trunc.bak’;</span></div><div>Starting backup at 20090925093253</div><div>using channel ORA_DISK_1</div><div>channel ORA_DISK_1: starting full datafile backup set</div><div>channel ORA_DISK_1: specifying datafile(s) in backup set</div><div>input datafile file number=00006 name=/u01/oracle11gr2/oradata/ora11g/ts01.dbf</div><div>channel ORA_DISK_1: starting piece 1 at 20090925093253</div><div>channel ORA_DISK_1: finished piece 1 at 20090925093254</div><div>piece handle=/u03/df_6_bk_trunc.bak tag=TAG20090925T093253 comment=NONE</div><div>channel ORA_DISK_1: backup set complete, elapsed time: 00:00:01</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">Finished backup at 20090925093254</span></div><div style="word-wrap: break-word; margin: 5px 0px; padding: 0px; font-size: 12px; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="word-wrap: break-word; font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-variant-caps: normal; font-variant-ligatures: normal;">RMAN&gt; copy datafile 6 to ‘/u03/df_6_cp_trunc.bak’;</span></div><div>Starting backup at 20090925093330</div><div>using channel ORA_DISK_1</div><div>channel ORA_DISK_1: starting datafile copy</div><div>input datafile file number=00006 name=/u01/oracle11gr2/oradata/ora11g/ts01.dbf</div><div>output file name=/u03/df_6_cp_trunc.bak tag=TAG20090925T093330 RECID=45 STAMP=698492010</div><div>channel ORA_DISK_1: datafile copy complete, elapsed time: 00:00:01</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">Finished backup at 20090925093331</span></div><div style="word-wrap: break-word; margin: 5px 0px; padding: 0px; font-size: 12px; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="word-wrap: break-word; font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(102, 102, 102); font-variant-caps: normal; font-variant-ligatures: normal;">RMAN&gt; backup as copy datafile 6 format ‘/u03/df_6_as_trunc.bak’;</span></div><div>Starting backup at 20090925093348</div><div>using channel ORA_DISK_1</div><div>channel ORA_DISK_1: starting datafile copy</div><div>input datafile file number=00006 name=/u01/oracle11gr2/oradata/ora11g/ts01.dbf</div><div>output file name=/u03/df_6_as_trunc.bak tag=TAG20090925T093348 RECID=46 STAMP=698492028</div><div>channel ORA_DISK_1: datafile copy complete, elapsed time: 00:00:01</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">Finished backup at 20090925093349</span></div><div>oracle@dbatest1:/u03 #ls -lrth</div><div>-rw-r—– 1 oracle dba<span style="word-wrap: break-word; color: rgb(0, 0, 255);"> </span><span style="word-wrap: break-word; color: rgb(0, 0, 255);">1.6M</span> Sep 25 09:32 df_6_bk_trunc.bak</div><div>-rw-r—– 1 oracle dba 5.1M Sep 25 09:33 df_6_cp_trunc.bak</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">-rw-r—– 1 oracle dba 5.1M Sep 25 09:33 df_6_as_trunc.bak</span></div><div>由此可以看出</div><div><span style="color: rgb(227, 0, 0);">1. copy 和 backup as copy 应该是一样的.</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;"><span style="color: rgb(227, 0, 0);">2. copy 和 backup 是完全不一样的</span></span></div></span>
</div></body></html> 