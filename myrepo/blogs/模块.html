<html>
<head>
  <title>模块</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="788"/>
<h1>模块</h1>

<div>
<span><div>模块</div><div><br/></div><div>模块就是python中的一个.py文件</div><div>可以在模块中定义变量、函数和类，定义在模块中的变量、函数和类统称为模块的属性。</div><div><br/></div><div>为什么使用模块</div><div>1、代码重用</div><div>        在一个模块中可以导入另一个模块，从而重用另一个模块中定义的属性。</div><div>2、避免属性名冲突</div><div>        不同的模块中可以存在相同名称的属性。</div><div><br/></div><div>包</div><div>为了更好的组织和管理模块，python引入了包。</div><div>在某个目录下添加模块__init__.py后，这个目录就变成了包、因此包是包含了特定模块的特殊目录。</div><div>模块__init__.py的作用是初始化其所在的包，如果不需要初始化，其内容可以为空。</div><div>目录支持嵌套，所以包也支持嵌套，包中还可以有子包</div><div><br/></div><div>python官方提供了标准库，其中有非常多的模块可供我们使用，用以完成不同的任务</div><div><br/></div><div>如果想要使用标准库中的模块，必须使用import语句进行导入，导入方式有两种：</div><div>1、导入整个模块，语法格式：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import  [包名.]模块名</div></div><div>  </div><div>如果被导入的模块在一个包结构中，那么必须要通过其所有的父包导航到该模块：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>顶层父包名.子包名.....子包名。</div></div><div><br/></div><div>导入整个模块后，就可以访问模块中的属性了（包括：变量、函数和类）。其语法格式为：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>[包名.]模块名.属性名</div></div><div><br/></div><div>导入整个模块时，可以给导入的模块起一个别名，</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>语法格式：</div><div>import [包名.]模块名 as 模块的别<span style="background-color: transparent;">名</span></div></div><div><br/></div><div>2、导入模块中的属性</div><div>导入模块中某个属性的语法格式为：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>from [包名.]模块名 import 属性名</div></div><div><br/></div><div>同样，如果被导入的模块在一个包结构中，那么必须要通过其所有的父包导航到该模块：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>顶层父包名.子包名.....子包名。</div></div><div><br/></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">导入模块中的属性后，就可以直接访问模块中的属性了，而无需添加前缀“[包名.]模块名”,从而使得代码更加简洁，但是与添加前缀相比，代码的可读性差一点</span></div><div><br/></div><div>导入模块中多个属性</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">from [包名.]模块名 import 属性名1, 属性名2, ..., 属性名n</span></div></div><div><br/></div><div>导入模块的属性时，可以给导入的属性起一个别名</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">from [包名.]模块名 import 属性名1 as 属性名1的别名,  属性名2 as 属性名2的别名,  ...,  属性名n as 属性名n的别名</span></div></div><div><br/></div><div><br/></div><div>可以将模块中的属性一次性全部导入，其语法格式为：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>from [包名.]模块名 import *</div></div><div>强烈不推荐这种导入方式，因为：</div><div>1、效率低（将所有的属性全部导入了）</div><div>2、代码的可读性低（不知道具体导入了哪些属性）</div><div>3、容易出错（当两个模块中存在相同的属性）</div><div><br/></div><div><br/></div><div>当导入整个模块时，如果模块在一个包结构中，也可以适用类似导入模块中属性的语法格式：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>from 包名 import 模块名</div></div><div><br/></div><div><br/></div><div>使用第三方库中的模块</div><div>    除了官方提供的标准库之外，还有很多第三方库可供使用，以完成不同的任务</div><div>    如果想要使用第三方库中的模块，必须先使用工具pip下载安装第三方库，然后通过import语句进行导入</div><div><br/></div><div>PyPI（Python Package Index）</div><div>    是Python官方的，基于web的，几种管理的，第三方软件仓库，所有人都可以从PyPI下载安装第三方库，或者将自己开发的库发布到PyPI</div><div>    网址：<a href="https://pypi.org/">https://pypi.org/</a></div><div><br/></div><div>    pip（Package Install for Python）</div><div>    </div><div>第三方库的安装路径</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">[root@lyucan site-packages]# pwd</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">/usr/local/python3/lib/python3.7/site-packages         </span><span style="font-family: &quot;DejaVu Sans Mono&quot;; font-size: 9pt;"><font color="#0000FF"># /usr/local/python3是安装路径</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">[root@lyucan site-packages]# ll</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">total 36</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">drwxr-xr-x. 19 root root 4096 Jul 24 11:21</span> <span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 0, 255); font-size: 9pt;">django</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">drwxr-xr-x.  2 root root 4096 Jul 24 11:21</span> <span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 0, 255); font-size: 9pt;">Django-2.0.7.dist-info</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">-rw-r--r--.  1 root root  126 Jul  8 00:26 easy_install.py</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">drwxr-xr-x.  5 root root   90 Jul 24 11:20</span> <span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 0, 255); font-size: 9pt;">pip</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">drwxr-xr-x.  2 root root 4096 Jul 24 11:20</span> <span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 0, 255); font-size: 9pt;">pip-18.0.dist-info</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">drwxr-xr-x.  5 root root   89 Jul  8 00:26</span> <span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 0, 255); font-size: 9pt;">pkg_resources</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">drwxr-xr-x.  2 root root   40 Jul  8 00:26</span> <span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 0, 255); font-size: 9pt;">__pycache__</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">drwxr-xr-x.  4 root root 4096 Jul 24 11:20</span> <span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 0, 255); font-size: 9pt;">pytz</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">drwxr-xr-x.  2 root root 4096 Jul 24 11:20</span> <span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 0, 255); font-size: 9pt;">pytz-2018.5.dist-info</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">-rw-r--r--.  1 root root  119 Jul  8 00:25 README.txt</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">drwxr-xr-x.  6 root root 4096 Jul  8 00:26</span> <span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 0, 255); font-size: 9pt;">setuptools</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">drwxr-xr-x.  2 root root 4096 Jul  8 00:26</span> <span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 0, 255); font-size: 9pt;">setuptools-39.0.1.dist-info</span></div></div><div><br/></div><div>pip3相关命令</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>1、查看帮助信息</div><div>pip3</div><div><br/></div><div>2、列出已经安装的所有三方库</div><div>pip3 list</div><div><br/></div><div>3、模糊搜索某个第三方库</div><div>pip3 search xxx</div><div><br/></div><div>4、安装指定的第三方库（及其版本号）</div><div>pip3 install xxx</div><div>pip3 install xxx==y.y</div><div><br/></div><div>5、升级指定第三方库</div><div>pip3 install --upgrade xxx</div><div><br/></div><div>6、卸载指定的第三方库（及其版本号）</div><div>pip3 uninstall xxx</div><div>pip3 uninstall xxx==y.y</div><div><br/></div><div>7、查看pip3之后某个命令的帮助信息</div><div>pip3 &lt;cmd&gt; --help</div></div><div><br/></div><div><br/></div><div>使用当前项目中的模块</div><div>如果想要使用当前项目中的模块，必须通过import语句进行导入，有三种导入方式：</div><div>1、直接导入</div><div>        直接导入当前目录中的模块名</div><div>2、绝对导入</div><div>        导入模块名的绝对路径</div><div>3、相对导入</div><div>        导入模块名的相对路径，一个“.”表示当前目录，两个“..”表示当前目录的父目录</div><div>        当直接运行某个模块时，该模块就变成了主模块，主模块位于最顶层，与同目录下的其他模块无法构成相对关系，因此，当直接运行某个模块时，该模块不能使用相对导入。</div><div><br/></div><div><br/></div><div><br/></div><div>import语句的执行流程</div><div><br/></div><div>例如</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import sys</div></div><div>当使用import语句导入模块时，解释器会根据sys模块的modules属性值来查找模块是否已经被导入了。</div><div><br/></div><div>1、如果模块已经被导入了，解释器什么都不做。</div><div>2、如果模块没有被导入</div><div>    解释器按照某种路径搜索模块；</div><div>    （可选）将搜索到的模块编译为pyc字节码文件；</div><div>    执行编译生成的字节码文件从而运行模块；</div><div><br/></div><div><br/></div><div>解释器搜索模块路径</div><div><br/></div><div>解释器搜索模块路径存放在sys的变量path中</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; import sys</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; sys.path</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">['', '/usr/local/python3/lib/python37.zip', '/usr/local/python3/lib/python3.7', '/usr/local/python3/lib/python3.7/lib-dynload', '/root/.local/lib/python3.7/site-packages', '/usr/local/python3/lib/python3.7/site-packages']</span></div></div><div>顺序为：当前目录、标准库目录、第三方库安装目录</div><div><br/></div><div>在代码运行过程中可以改变这个值来改变模块搜索路径，但是在代码运行完成后，这个值就会还原</div><div><br/></div><div>为了永久的修改这个值，可以设置PYTHONPATH环境变量，PYTHONPATH对应的路径会自动添加到sys.path中。修改后的搜索路径在代码运行后仍然有效。</div><div><br/></div><div><br/></div><div><br/></div><div>当使用import语句导入模块时，如果模块还没有被导入，首先，解释器会按照某种路径搜索模块，其次，搜索到的模块可能会被编译为pyc字节码文件。</div><div>到搜索到的模块被第一次导入时，他会被便以为pyc字节码文件。pyc字节码问价内存放在与该模块同目录下的目录__pycache__中，其命名格式为：模块名.cpython-版本号.pyc。这样，模块的字节码问价就被缓存起来了，再次加载该模块时，如果改模块没有发生变化，则无需将搜索到的模块编译为pyc字节码文件，而是直接读取缓存中的pyc字节码文件，从而提高加载速度。</div><div><br/></div><div>导入包中的模块时，会先导入包中的__init__.py，因此，在运行被导入的模块之前，会从最顶层的父包开始，先依次运行所有父包中的__init__.py</div><div><br/></div><div><br/></div><div><br/></div><div><span style="font-weight: bold;">模块内的数据访问控制</span></div><div><br/></div><div>1、使用模块特殊属性——__all__</div><div><br/></div><div>为了在某种程度上实现模块内的数据访问控制，还可以在模块被定义特殊属性__all__。这样。使用语句“from 模块名 import *”只能导入特殊属性__all__中定义的属性，但是，使用“import 模块名”语句仍然可以导入所有的属性。</div><div><br/></div><div>2、为了在某种程度上实现模块内的数据访问控制，可以在模块内的某些属性前添加单下划线“_”，这样，就无法使用语句“from 模块名 import *”导入相应的属性了，但是，使用语句“import 模块名”仍然可以导入相应的属性。</div><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 226px;"></col><col style="width: 223px;"></col><col style="width: 221px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 226px; padding: 8px;"><div style="text-align: center;">模块内数据访问控制方式</div></td><td style="text-align: center; border: 1px solid rgb(204, 204, 204); width: 223px; padding: 8px;">导入语句</td><td style="border: 1px solid rgb(204, 204, 204); width: 221px; padding: 8px;"><div style="text-align: center;">可以导入哪些属性</div></td></tr><tr><td rowspan="2" style="height: 56px; vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 226px; padding: 8px;"><div style="text-align: center;">模块内的属性前添加单下划线“_”</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 223px; padding: 8px;"><div style="text-align: center;">from 模块名 import *</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 221px; padding: 8px;"><div style="text-align: center;">没有单下划线的属性</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 223px; padding: 8px;"><div style="text-align: center;">import 模块名</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 221px; padding: 8px;"><div style="text-align: center;">所有属性</div></td></tr><tr><td rowspan="2" style="height: 56px; vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 226px; padding: 8px;"><div style="text-align: center;">模块内定义特殊属性__all__</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 223px; padding: 8px;"><div style="text-align: center;">form 模块名 import *</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 221px; padding: 8px;"><div style="text-align: center;">__all__定义的属性</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 223px; padding: 8px;"><div style="text-align: center;">import 模块名</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 221px; padding: 8px;"><div style="text-align: center;">所有属性</div></td></tr></tbody></table><div>当使用语句“from 模块名 import *”导入属性时：</div></div><div>如果在模块内的某个属性前添加了单下划线“_”，又将这个属性定义在模块内的特殊属性__all__中，那么__all__比单下划线具有更高的优先级。</div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></span>
</div></body></html> 