<html>
<head>
  <title>Oracle归档日志</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="515"/>
<h1>Oracle归档日志</h1>

<div>
<span><div>Oracle归档日志</div><div><br/></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: tahoma, 宋体;">归档日志是用来将redo log里面的日志永久保存下来所使用的日志，我们知道redo log 是循环使用的，新的redo log将覆盖原来的日志，这样的话，如果数据库数据文件损坏，将丢失数据，我们可以用备份来进行恢复，但是利用备份不可能完全恢复，还需要使用日志来恢复到数据库崩溃的那个时间点。</span></div><div><br/></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: tahoma, 宋体; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">1、查看归档日志</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: tahoma, 宋体;">1）查看归档日志模式</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SQL&gt; select log_mode from v$database;</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">LOG_MODE</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">------------</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">NOARCHIVELOG</span></div></div><div><br/></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: tahoma, 宋体;">2）查看归档是否启动</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#333333" face="tahoma, 宋体"><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SQL&gt; select archiver from v$instance;</span></font></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><font color="#333333" face="tahoma, 宋体"><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">ARCHIVE</span></font></div><div><font color="#333333" face="tahoma, 宋体"><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">-------</span></font></div><div><font color="#333333" face="tahoma, 宋体"><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">STOPPED</span></font></div></div><div><br/></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: tahoma, 宋体; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">3）查看是不是归档方式及归档的路径</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SQL&gt; archive log list;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Database log mode           No Archive Mode</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Automatic archival          Disabled</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Archive destination         <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">USE_DB_RECOVERY_FILE_DEST</span>   ##这里默认使用闪回区作为归档日志的存放目录，存放归档日志格式为xxxx.arc</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Oldest online log sequence     17</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Current log sequence        19</span></div></div><div><br/></div><div><br/></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: tahoma, 宋体; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">2、打开归档日志</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#328712" style="font-size: 12pt;">sqlplus / as  sysdba</font></div><div><font style="font-size: 12pt; color: rgb(50, 135, 18);">sql&gt; shutdown immediate;    </font></div><div><font style="font-size: 12pt; color: rgb(50, 135, 18);">sql&gt; startup mount;               #打开控制文件，不打开数据文件  </font></div><div><font style="font-size: 12pt; color: rgb(50, 135, 18);">sql&gt; alter database archivelog;   #将数据库切换为归档模式  </font></div><div><font style="font-size: 12pt; color: rgb(50, 135, 18);">sql&gt; alter database open;         #将数据文件打开</font></div><div><br/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SQL&gt; archive log list;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Database log mode           <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">Archive Mode</span></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Automatic archival          Enabled</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Archive destination         USE_DB_RECOVERY_FILE_DEST</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Oldest online log sequence     17</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Next log sequence to archive   19</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Current log sequence        19</span></div></div><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: tahoma, 宋体; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">3、禁用归档日志</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt; color: rgb(50, 135, 18);">sql&gt; archive log list;                #查看是否是归档方式  </font></div><div><font color="#328712" style="font-size: 12pt;">sql&gt; alter system set log_archive_start=false scope=spfile;    ##禁用主动归档</font></div><div><font color="#328712" style="font-size: 12pt;">sql&gt; shutdown immediate;    </font></div><div><font color="#328712" style="font-size: 12pt;">sql&gt; startup mount;                   #打开控制文件，不打开数据文件  </font></div><div><font color="#328712" style="font-size: 12pt;">sql&gt; alter database noarchivelog;     #将数据库切换为非归档模式  </font></div><div><font color="#328712" style="font-size: 12pt;">sql&gt; alter database open;             #将数据文件打开</font></div><div><br/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SQL&gt; archive log list;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Database log mode           <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">No Archive Mode</span></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Automatic archival          Disabled</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Archive destination         USE_DB_RECOVERY_FILE_DEST</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Oldest online log sequence     17</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Current log sequence        19</span></div></div><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><br/></div><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: tahoma, 宋体; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">根据上面的USE_DB_RECOVERY_FILE_DEST，来查找DB_RECOVERY_FILE_DEST</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SQL&gt; show parameter DB_RECOVERY_FILE_DEST;</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">NAME                      TYPE   VALUE</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">------------------------------------ ----------- ------------------------------</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">db_recovery_file_dest           string      /oracle/11g/flash_recovery_are</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">                                 a</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">db_recovery_file_dest_size      big integer 3882M</span></div></div><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><div><br/></div></div><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: tahoma, 宋体; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">4.修改归档日志的路径</span></div><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: tahoma, 宋体; font-variant-caps: normal; font-variant-ligatures: normal;">归档日志默认使用闪回区来存储归档日志，如上所示，可以修改使用其他路径；</span></div><div>查看归档日志路径，可以使用31个路径存放归档日志，我们通常只需要1个存储就行了，没必要搞很多，且开启多份归档需要消耗一部分性能。</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SQL&gt; show parameter log_archive_dest_;</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">NAME                      TYPE   VALUE</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">------------------------------------ ----------- ------------------------------</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">log_archive_dest_1              string</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">......</span></div><div><span style="min-height: 13pt; font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">log_archive_dest_31             string</span></div></div><div><br/></div><div><a href="log_archive_dest_n 和log_archive_dest和 log_arc.html" style="color: rgb(105, 170, 53);">log_archive_dest_n 和log_archive_dest和 log_archive_duplex_dest</a></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt; color: rgb(50, 135, 18);">sql&gt; archive log list;  #查看是不是归档方式  </font></div><div><font style="font-size: 12pt; color: rgb(50, 135, 18);">sql&gt; alter system set log_archive_start=true scope=both; #启用自动归档  </font></div><div><br/></div><div><font style="font-size: 12pt; color: rgb(50, 135, 18);">sql&gt; alter system set log_archive_dest_1=&quot;location=/oracle/11g/arch/orcl/arch01&quot; scope=both;  </font></div><div><font style="font-size: 12pt; color: rgb(50, 135, 18);">sql&gt; alter system set log_archive_dest_2=&quot;location=/oracle/11g/arch/orcl/arch02&quot; scope=both; </font></div><div><br/></div><div><font color="#328712" style="font-size: 12pt;"><span style="font-family: Monaco; font-size: 12pt; color: rgb(50, 135, 18);">#如果归档到两个位置，则可以通过上边方法实现，归档日志存放格式为xxxx.dbf</span></font></div></div><div>  </div><div><span style="font-size: 12pt;"> 设置归档日记格式</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#328712" style="font-size: 12pt;">sql&gt; alter system set log_archive_format=''arch_%d_%t_%r_%s.log''</font></div></div><div><br/></div><div><br/></div><div>切换日志组 </div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt; color: rgb(50, 135, 18);">sql&gt; alter system switch logfile;</font></div><div><br/></div><div><span style="min-height: 13pt; font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SQL&gt; alter system archive log current;</span></div></div><div>这次日志切换将归档写到两个目标地,  即<span style="font-size: 10pt;">上边的/oracle/11g/arch/orcl/arch0n</span></div><div style="text-align: justify;"><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: tahoma;">alter system switch logfile 是强制日志切换，不一定就归档当前的重做日志文件（若自动归档打开，就归档前的重做日志，若自动归档没有打开，就不归档当前重做日志。）</span></div><div style="text-align: justify;"><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: tahoma;">alter system archive log current 是归档当前的重做日志文件，不管自动归档有没有打都归档。</span></div><div style="text-align: justify;"><div><br/></div></div><div style="text-align: justify;"><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: tahoma;">主要的区别在于:</span></div><div style="text-align: justify;"><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: tahoma;">ALTER SYSTEM SWITCH LOGFILE对单实例数据库或RAC中的当前实例执行日志切换;</span></div><div style="margin-top: 1em; margin-bottom: 1em; text-align: justify;"><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: tahoma;-en-paragraph:true;">而ALTER SYSTEM ARCHIVE LOG CURRENT会对数据库中的所有实例执行日志切换。</span></div><div style="text-align: justify;"><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: tahoma;">为什么执行热备后要执行alter system archive log current 这个语句，看到很多脚本都是这样写的。</span></div><div style="margin-top: 1em; margin-bottom: 1em; text-align: justify;"><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: tahoma;-en-paragraph:true;">是不是必须的？</span></div><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><div><span style="box-sizing: border-box; outline: 0px; font-size: 16px; word-break: break-all; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(79, 79, 79); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 26px;">一般的RMAN脚本都是这样写的，因为RMAN是可以备份归档日志的。alter system archive log current 这样后就可以将所有的归档都备份出来了。这样做是为了保证数据的完整和一致。</span></div></div><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><div><br/></div></div><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: tahoma, 宋体; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">5.查看现在归档日志的大小</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#328712" style="font-size: 12pt;">select sum(a.BLOCK_SIZE*a.BLOCKS)/1024/1024 from v$archived_log a where a.DELETED='NO';</font></div></div><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><div><br/></div></div><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: tahoma, 宋体; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">6.查看归档日志最大大小</span></div><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: tahoma, 宋体; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">show parameter db_recovery_file_dest_size;</span></div><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><div><br/></div></div><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: tahoma, 宋体; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">7.设置归档日志最大值，处理归档日志满，无法启动</span></div><div>startup nomount;</div><div>alter system set db_recovery_file_dest_size = 4G;</div><div>alter database mount;</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">alter database on;</span></div><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: tahoma, 宋体; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">8.查看归档日志的使用率</span></div><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: tahoma, 宋体; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">select PERCENT_SPACE_USED from V$FLASH_RECOVERY_AREA_USAGE where file_type LIKE 'ARCHIVED LOG';</span></div><div style="font-size: 14px; letter-spacing: normal; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: tahoma, 宋体; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">9.获取闪回区的使用率</span></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: tahoma, 宋体; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">select sum(PERCENT_SPACE_USED )  from V$RECOVERY_AREA_USAGE;</span></div></span>
</div></body></html> 