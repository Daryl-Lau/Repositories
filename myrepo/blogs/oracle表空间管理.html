<html>
<head>
  <title>oracle表空间管理</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="414"/>
<h1>oracle表空间管理</h1>

<div>
<span><div><div><div><div><div>oracle表空间管理</div><div><br/></div><div><img src="oracle表空间管理_files/Image.png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">表空间类型</span></font></div><ul><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">系统表空间</span></div></li><ul><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">数据库创建的时候创建</span></div></li><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">存在数据字典</span></div></li><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">存在系统回滚段</span></div></li></ul><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">非系统表空间</span></div></li><ul><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">分隔不同的段</span></div></li><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">对用户对象限制使用空间</span></div></li></ul></ul><div><br/></div><div><span style="font-size: 12pt;">创建表空间基本语法</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: DejaVu Sans Mono; font-size: 11pt; color: rgb(0, 128, 0);">CREATE [UNDO]  TABLESPACE tablespace_name          </span></div><div><span style="font-family: DejaVu Sans Mono; font-size: 11pt; color: rgb(0, 128, 0);">[DATAFILE datefile_spec1 [,datefile_spec2] ......   </span></div><div><span style="font-family: DejaVu Sans Mono; font-size: 11pt; color: rgb(0, 128, 0);">[{MININUM EXTENT integer [k|m]   </span></div><div><span style="font-family: DejaVu Sans Mono; font-size: 11pt; color: rgb(0, 128, 0);">|BLOCKSIZE integer [k]   </span></div><div><span style="font-family: DejaVu Sans Mono; font-size: 11pt; color: rgb(0, 128, 0);">|logging clause | FORCE LOGGING   </span></div><div><span style="font-family: DejaVu Sans Mono; font-size: 11pt; color: rgb(0, 128, 0);">|DEFAULT {data_segment_compression} storage_clause   </span></div><div><span style="font-family: DejaVu Sans Mono; font-size: 11pt; color: rgb(0, 128, 0);">|[online|offline]   </span></div><div><span style="font-family: DejaVu Sans Mono; font-size: 11pt; color: rgb(0, 128, 0);">|[PERMANENT|TEMPORARY]   </span></div><div><span style="font-family: DejaVu Sans Mono; font-size: 11pt; color: rgb(0, 128, 0);">|extent_manager_clause   </span></div><div><span style="font-family: DejaVu Sans Mono; font-size: 11pt; color: rgb(0, 128, 0);">|segment_manager_clause}]</span></div><div><br/></div><div>* 1、undo   </div><div>* 说明系统将创建一个回滚表空间。   </div><div>* 在9i中数据库管理员可以不必管理回滚段，只有建立了undo表空间，系统就会自动管理回滚段的分配，回收的工作。   </div><div>* 当然,也可以创建一般的表空间,在上面创建回滚段.不过对于用户来说,系统管理比自己管理要好很多.   </div><div>* 如果需要自己管理,请参见回滚段管理的命令详解.   </div><div>* 当没有为系统指定回滚表空间时,系统将使用system系统回滚段来进行事务管理。   </div><div>* //   </div><div>* 2、tablespace_name   </div><div>* 指出表空间的名称。   </div><div>* //   </div><div>* 3、datafile  datefile_spec1   </div><div>* 指出表空间包含什么空间文件。   </div><div>* datefile_spec1是形如:[ 'filename' ] [SIZE integer [ K | M ]] [REUSE] [autoextend_clause]   </div><div>* [autoextend_clause]是形如：AUTOEXTEND { OFF | ON [ NEXT integer [ K | M ] ] [maxsize_clause] }   </div><div>* 其中filename是数据文件的路径名，可以是相对路径，也可以是绝对路径。   </div><div>* size是文件的大小,   </div><div>* REUSE表示文件是否被重用.   </div><div>* AUTOEXTEND表明是否自动扩展.   </div><div>* OFF | ON  表示自动扩展是否被关闭.   </div><div>* NEXT 表示数据文件满了以后,扩展的大小.   </div><div>* maxsize_clause表示数据文件的最大大小.形如MAXSIZE { UNLIMITED | integer [ K | M ] }.   </div><div>* UNLIMITED 表示无限的表空间.   </div><div>* integer是数据文件的最大大小.   </div><div>*        DATAFILE  'D:&quot;oracle&quot;oradata&quot;IMAGEDATA01.dbf'  SIZE 2000M,   </div><div>*                  'D:&quot;oracle&quot;oradata&quot;IMAGEDATA02.dbf'  SIZE 2000M   </div><div>* //   </div><div>* 4、MININUM EXTENT integer [k|m]   </div><div>* 指出在表空间中范围的最小值。这个参数可以减小空间碎片，保证在表空间的范围是这个数值的整数倍。   </div><div>* //   </div><div>* 5、BLOCKSIZE integer [k]   </div><div>* 这个参数可以设定一个不标准的块的大小。如果要设置这个参数，必须设置db_block_size,   </div><div>* 至少一个db_nk_block_size,并且声明的integer的值必须等于db_nk_block_size.   </div><div>* 注意：在临时表空间不能设置这个参数。   </div><div>* //   </div><div>* 6、logging clause   </div><div>* 这个子句声明这个表空间上所有的用户对象的日志属性（缺省是logging），   </div><div>* 包括表，索引，分区，物化视图，物化视图上的索引，分区。   </div><div>* //   </div><div>* 7、FORCE LOGGING   </div><div>* 使用这个子句指出表空间进入强制日志模式。此时，系统将记录表空间上对象的所有改变，除了临时段的改变。   </div><div>* 这个参数高于对象的nologging选项。   </div><div>* 注意：设置这个参数数据库不行open并且出于读写模式。而且，在临时表空间和回滚表空间中不能使用这个选项。   </div><div>* //   </div><div>* 8、DEFAULT storage_clause   </div><div>* 声明缺省的存储子句。   </div><div>* //   </div><div>* 9、online|offline   </div><div>* 改变表空间的状态。online使表空间创建后立即有效.这是缺省值.   </div><div>* offline使表空间创建后无效.这个值，可以从dba_tablespace中得到。   </div><div>* //   </div><div>* 10、PERMANENT|TEMPORARY   </div><div>* 指出表空间的属性，是永久表空间还是临时表空间。   </div><div>* 永久表空间存放的是永久对象，临时表空间存放的是session生命期中存在的临时对象。   </div><div>* 这个参数生成的临时表空间创建后一直都是字典管理，不能使用extent management local选项。   </div><div>* 如果要创建本地管理表空间，必须使用create temporary tablespace   </div><div>* 注意，声明了这个参数后，不能声明block size   </div><div>* //   </div><div>* 11、extent_management_clause   </div><div>* 这是最重要的子句，说明了表空间如何管理范围。一旦你声明了这个子句，只能通过移植的方式改变这些参数。   </div><div>* 如果希望表空间本地管理的话，声明local选项。本地管理表空间是通过位图管理的。   </div><div>* autoallocate说明表空间自动分配范围，用户不能指定范围的大小。只有9.0以上的版本具有这个功能。   </div><div>* uniform说明表空间的范围的固定大小，缺省是1m。   </div><div>* 不能将本地管理的数据库的system表空间设置成字典管理。   </div><div>* oracle公司推荐使用本地管理表空间。   </div><div>* 如果没有设置extent_management_clause，oracle会给他设置一个默认值。   </div><div>* 如果初始化参数compatible小于9.0.0,那么系统创建字典管理表空间。   </div><div>* 如果大于9.0.0,那么按照如下设置：   </div><div>* 如果没有指定 default  storage_clause,oracle创建一个自动分配的本地管理表空间。   </div><div>* 否则，   </div><div>* 如果指定了mininum extent,那么oracle判断mininum extent 、initial、next是否相等,以及pctincrease是否=0.   </div><div>* 如果满足以上的条件，oracle创建一个本地管理表空间，extent size是initial.   </div><div>* 如果不满足以上条件，那么oracle将创建一个自动分配的本地管理表空间。   </div><div>* 如果没有指定mininum extent。initial、那么oracle判断next是否相等,以及pctincrease是否=0。   </div><div>* 如果满足oracle创建一个本地管理表空间并指定uniform。否则oracle将创建一个自动分配的本地管理表空间。   </div><div>* 注意：本地管理表空间只能存储永久对象。   </div><div>* 如果你声明了local,将不能声明 default  storage_clause,mininum extent、temporary.   </div><div>* EXTENT MANAGEMENT LOCAL   </div><div>* //   </div><div>* 12、segment_management_clause   </div><div>* 段空间管理的方式，自动或者手动:   </div><div>* SEGMENT SPACE MANAGEMENT {AUTO|MANUAL}   </div></div><div><br/></div><div><br/></div><div><span style="font-size: 12pt;">查看表空间</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="min-height: 13pt; font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SQL&gt; select tablespace_name,file_name,bytes from dba_data_files;</span></div></div><div><img src="oracle表空间管理_files/Image [1].png" type="image/png" data-filename="Image.png"/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">大文件表空间</span></font></div><ul><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">大文件表空间</span><span style="font-size: 12pt; color: black; font-family: &quot;Courier New&quot;;">(</span><span style="font-size: 12pt; color: black; font-family: &quot;Courier New&quot;;">bigfile</span> <span style="font-size: 12pt; color: black; font-family: &quot;Courier New&quot;;">tablespaces)</span></div></li><ul><li><div><span style="font-size: 12pt; color: black; font-family: Calibri;">Oracle</span> <span style="font-size: 12pt; color: black; font-family: Calibri;">Database</span><span style="font-size: 12pt; color: black; font-family: SimSun;">允许你创建大文件表空间</span><span style="font-size: 12pt; color: black; font-family: Calibri;">,</span><span style="font-size: 12pt; color: black; font-family: SimSun;">大文件表空间由单个文件组成</span></div></li><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: black; font-family: SimSun;">最大可以包含</span><span style="font-size: 12pt; color: black; font-family: Calibri;">4G(2^32)</span><span style="font-size: 12pt; color: black; font-family: SimSun;">个</span><span style="font-size: 12pt; color: black; font-family: Calibri;">blocks</span><span style="font-size: 12pt; color: black; font-family: Calibri;">.</span></font></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: black; font-family: SimSun;">大文件表空间使得</span><span style="font-size: 12pt; color: black; font-family: Calibri;">Oracle</span><span style="font-size: 12pt; color: black; font-family: SimSun;">获得如下收益</span><span style="font-size: 12pt; color: black; font-family: Calibri;">:</span></font></div></li><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: black; font-family: SimSun;">显著的增强了</span><span style="font-size: 12pt; color: black; font-family: Calibri;">Oracle</span><span style="font-size: 12pt; color: black; font-family: SimSun;">数据库的存储容量</span></font></div></li><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">检查点的性能提升</span></div></li><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: black; font-family: SimSun;">对于</span><span style="font-size: 12pt; color: black; font-family: Calibri;">8k</span><span style="font-size: 12pt; color: black; font-family: SimSun;">的</span><span style="font-size: 12pt; color: black; font-family: Calibri;">blocks,</span><span style="font-size: 12pt; color: black; font-family: SimSun;">最大数据文件可以达到</span><span style="font-size: 12pt; color: black; font-family: Calibri;">32T</span><span style="font-size: 12pt; color: black; font-family: SimSun;">；对于</span><span style="font-size: 12pt; color: black; font-family: Calibri;">32K</span><span style="font-size: 12pt; color: black; font-family: SimSun;">的</span><span style="font-size: 12pt; color: black; font-family: Calibri;">blocks</span><span style="font-size: 12pt; color: black; font-family: SimSun;">，最大数据文件可达</span><span style="font-size: 12pt; color: black; font-family: Calibri;">128T</span></font></div></li><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">缩减了超大型数据库的数据文件的数量</span></div></li><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">简化了管理</span></div></li></ul></ul><div><br/></div><div><span style="font-size: 16px;">创建大文件表空间</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 11pt; font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0);">SQL&gt; create bigfile tablespace bigtbs datafile '/oracle/11g/oradata/oracle/bigtbs.dbf' size 1G;</span></div><div><br style="font-family: DejaVu Sans Mono; font-size: 11pt; color: rgb(0, 128, 0);"/></div><div><span style="font-size: 11pt; font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0);">Tablespace created.</span></div></div><div><br/></div><div><span style="font-size: 12pt;">对于大文件 表空间，只能为LMT（本地管理表空间）和ASSM（自动段空间管理）管理</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SQL&gt; select TABLESPACE_NAME,EXTENT_MANAGEMENT,</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SEGMENT_SPACE_MANAGEMENT from dba_tablespaces where tablespace_name='BIGTBS';  2 </span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">TABLESPACE_NAME             EXTENT_MAN SEGMEN</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">--------------------------- ---------- ------</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">BIGTBS                      LOCAL      AUTO</span></div></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(227, 0, 0);">对于undo、temp、system表空间可以使LMT+MANUAL</span></div><div><br/></div><div><span style="font-size: 16px;">oracle默认采用小文件表空间，可以使用以下sql查看</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SQL&gt; SELECT PROPERTY_VALUE FROM DATABASE_PROPERTIES WHERE PROPERTY_NAME = 'DEFAULT_TBS_TYPE';</span></font></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><font><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">PROPERTY_VALUE</span></font></div><div><font><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">--------------------------------------------------------------------------------</span></font></div><div><font><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SMALLFILE</span></font></div></div><div><br/></div><div><span style="font-size: 16px;">更改默认表空间方式</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="SimSun"><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">system@MYSQL_MA&gt; ALTER DATABASE SET DEFAULT BIGFILE TABLESPACE;</span></font></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><font face="SimSun"><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Database altered.</span></font></div></div><div><br/></div><div><br/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">表空间的空间管理</span></font></div><div><span style="font-size: 12pt; outline: 0px; word-break: break-all; font-family: &quot;Courier New&quot;;">在Oracle8</span><span style="font-size: 12pt; outline: 0px; word-break: break-all; font-family: &quot;Courier New&quot;;">i</span><span style="font-size: 12pt; outline: 0px; word-break: break-all; font-family: &quot;Courier New&quot;;">的版本中，Oracle推出了一种全新的表空间管理方式：本地化管理的表空间。所谓本地化管理，就是指Oracle不再利用数据字典表来记录Oracle表空间里面的区的使用状况，而是在每个表空间的数据文件的头部加入了一个位图区，在其中记录每个区的使用状况。每当一个区被使用，或者被释放以供重新使用时，Oracle都会更新数据文件头部的这个记录，反映这个变化。</span></div><div style="box-sizing: border-box; outline: 0px; padding: 0px; margin: 0px; word-break: break-all; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><font style="font-size: 12pt;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">   </span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">本地化管理的表空间的创建过程：</span></font></div></div><div style="box-sizing: border-box; outline: 0px; padding: 0px; margin: 0px; word-break: break-all; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><font style="font-size: 12pt;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">   </span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">语法：</span></font></div><div style="box-sizing: border-box; outline: 0px; padding: 0px; margin: 0px; word-break: break-all; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><span style="font-family: PingFang SC; font-size: 12pt; color: rgb(128, 0, 0);">CREATE TABLESPACE 表空间名字</span></font></div><div><font style="font-size: 12pt;"><span style="font-family: PingFang SC; font-size: 12pt; color: rgb(128, 0, 0);">    DATAFILE '数据文件详细信息'</span></font></div><div><font style="font-size: 12pt;"><span style="font-family: PingFang SC; font-size: 12pt; color: rgb(128, 0, 0);">    [EXTENT MANAGEMENT { LOCAL</span></font></div><div><font style="font-size: 12pt;"><span style="font-family: PingFang SC; font-size: 12pt; color: rgb(128, 0, 0);">    {AUTOALLOCATE | UNIFORM [SIZE INTETER [K|M]]}}]</span></font></div></div></div><div style="box-sizing: border-box; outline: 0px; padding: 0px; margin: 0px; word-break: break-all; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><font style="font-size: 12pt;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">   </span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">关键字EXTENT MANAGEMENT LOCAL 指定这是一个本地化管理的表空间。对于系统表空间，只能在创建数据库的时候指定EXTENT MANGEMENT LOCAL，因为它是数据库创建时建立的第一个表空间。</span></font></div></div><div style="box-sizing: border-box; outline: 0px; padding: 0px; margin: 0px; word-break: break-all; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><font style="font-size: 12pt;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">   </span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">在8i中，字典管理还是默认的管理方式，当选择了LOCAL关键字，即表明这是一个本地管理的表空间。当然还可以继续选择更细的管理方式：是 AUTOALLOCATE 还是 UNIFORM。若为AUTOALLOCATE，则表明让Oracle来决定区块的使用办法；若选择了UNIFORM，则还可以详细指定每个区块的大小，若不加指定，则为每个区使用1M大小。</span></font></div></div><div style="box-sizing: border-box; outline: 0px; padding: 0px; margin: 0px; word-break: break-all; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><font style="font-size: 12pt;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">   </span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">Oracle之所以推出了这种新的表空间管理方法，让我们来看一下这种表空间组织方法的优点：</span></font></div></div><div style="box-sizing: border-box; outline: 0px; padding: 0px; margin: 0px; word-break: break-all; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><font style="font-size: 12pt;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">   </span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">1. 本地化管理的表空间避免了递归的空间管理操作。而这种情况在数据字典管理的表空间是经常出现的，当表空间里的区的使用状况发生改变时，数据字典的表的信息发生改变，从而同时也使用了在系统表空间里的回滚段。</span></font></div><div><font style="font-size: 12pt;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">   </span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">2. 本地化管理的表空间避免了在数据字典相应表里面写入空闲空间、已使用空间的信息，从而减少了数据字典表的竞争，提高了空间管理的并发性</span></font></div><div><font style="font-size: 12pt;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">   </span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">3. 区的本地化管理自动跟踪表空间里的空闲块，减少了手工合并自由空间的需要。</span></font></div><div><font style="font-size: 12pt;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">   </span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">4. 表空间里的区的大小可以选择由Oracle系统来决定，或者由数据库管理员指定一个统一的大小，避免了字典表空间一直头疼的碎片问题。</span></font></div><div><font style="font-size: 12pt;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">   </span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">5. 从由数据字典来管理空闲块改为由数据文件的头部记录来管理空闲块，这样避免产生回滚信息，不再使用系统表空间里的回滚段。因为由数据字典来管理的话，它会把相关信息记在数据字典的表里，从而产生回滚信息。</span></font></div></div><div><font style="font-size: 12pt;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">   </span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">由于这种表空间的以上特性，所以它支持在一个表空间里边进行更多的并发操作，并减少了对数据字典的依赖。</span></font></div><div><span style="font-size: 12pt;">LMT（本地表空间管理）</span></div></div><ul><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">本地管理表空间:</span></div></li><ul><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">在表空间里面管理自由的范围</span></div></li><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: black; font-family: Calibri;">Bitmap</span><span style="font-size: 12pt; color: black; font-family: SimSun;">用于记录自由的范围</span></font></div></li><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: black; font-family: SimSun;">每位对应一个</span><span style="font-size: 12pt; color: black; font-family: Calibri;">block</span><span style="font-size: 12pt; color: black; font-family: SimSun;">或者一组</span><span style="font-size: 12pt; color: black; font-family: Calibri;">block</span></font></div></li><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">位的值表明空闲或者被使用</span></div></li><li><div><span style="font-size: 12pt; font-family: SimSun;">减少在数据字典中的竞争</span></div></li><li><div><span style="font-size: 12pt; font-family: SimSun;">当空间分配或释放时不产生回滚信息</span></div></li><li><div><span style="font-size: 12pt; font-family: SimSun;">不需要表空间空闲空间的合并</span></div></li></ul></ul><div><br/></div><div>示例：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="SimSun"><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SQL&gt; CREATE TABLESPACE tbs</span></font></div><div><font face="SimSun"><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">DATAFILE '/oracle/11g/oradata/oracle/tbs01.dbf' SIZE 500M</span></font></div><div><font face="SimSun"><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;"><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">EXTENT MANAGEMENT LOCAL UNIFORM SIZE 128K</span>;            ##指定每个区的大小为128K，也可以使用autoallocate</span></font></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Tablespace created.</span></div></div><div><span style="font-size: 12pt; color: rgb(227, 0, 0);">DMT（数据字典表空间管理，已经被弃用）</span></div><div><br/></div><div><br/></div><div><br/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">回滚表空间</span></font></div><ul><li><div><span style="font-size: 12pt; color: black;">用于存储回滚段</span></div></li><li><div><span style="font-size: 12pt; color: black;">不能包含任何其他对象</span></div></li><li><div><span style="font-size: 12pt; color: black;">区是本地管理的</span></div></li></ul><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SQL&gt; CREATE UNDO TABLESPACE undo01</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">DATAFILE '/oracle/11g/oradata/oracle/undo01.dbf' SIZE 40M;</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Tablespace created.</span></div></div><div><br/></div><div><br/></div><div><br/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">临时表空间</span></font></div><ul><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">用于排序操作</span></div></li><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">可以被多个用户共享</span></div></li><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">不能存在任何永久的对象</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SQL&gt; CREATE TEMPORARY TABLESPACE temp</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">TEMPFILE '/oracle/11g/oradata/oracle/temp01.dbf' SIZE 20M</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">EXTENT MANAGEMENT LOCAL UNIFORM SIZE 4M;</span></div></div><div><br/></div><div><span style="font-size: 12pt;">系统的默认临时表空间</span></div><div><span style="font-size: 12pt;">限制：</span></div><ul><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">只能在创建一个新的默认临时表空间后原来的才可以删除</span></div></li><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">不能离线</span></div></li><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">不能修改为一个永久的表空间</span></div></li></ul><div><br/></div><div><a href="修改默认临时表空间.html" style="font-size: 12pt; color: rgb(105, 170, 53);">修改默认临时表空间</a></div><div><br/></div><div><br/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">只读表空间</span></font></div><div><span style="font-size: 12pt;">设置表空间为只读状态，将会有以下影响：</span></div><ul><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">引起一个检查点</span></div></li><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">数据只能被读取</span></div></li><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">表空间中的对象能被删除</span></div></li></ul><div><br/></div><div><span style="font-size: 12pt;">使用下面sql把表空间设置为只读/读写状态</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="min-height: 13pt; font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SQL&gt; ALTER TABLESPACE tbs <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">READ ONLY</span>;</span></div><div><br/></div><div><span style="min-height: 13pt; font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Tablespace altered.</span></div><div><br/></div><div><span style="min-height: 13pt; font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SQL&gt; ALTER TABLESPACE tbs <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">READ WRITE</span>;</span></div><div><br/></div><div><span style="min-height: 13pt; font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Tablespace altered.</span></div></div><div><br/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">离线/在线表空间</span></font></div></div><div><span style="font-size: 12pt;">若表空间离线，将会有以下影响：</span></div><ul><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">表空间中的所有数据都不能被访问</span></div></li><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: black; font-family: SimSun;">有些表空间是不能被离线的</span><span style="font-size: 12pt; color: black; font-family: Calibri;">:</span></font></div></li><ul><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">系统表空间</span></div></li><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">存在激活的回滚段的表空间</span></div></li><li><div><span style="font-size: 12pt; color: black; font-family: SimSun;">默认的临时表空间</span></div></li></ul></ul><div><br/></div><div>使用以下sql把表空间设置为离线/在线状态</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SQL&gt; ALTER TABLESPACE tbs <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">OFFLINE</span>;</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Tablespace altered.</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SQL&gt; ALTER TABLESPACE tbs <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">ONLINE</span>;</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Tablespace altered.</span></div></div><div><br/></div><div><br/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">修改表空间大小</span></font></div><div><br/></div><div><span style="font-size: 12pt;">1）在创建表空间的时候指定自动增长</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SQL&gt; CREATE TABLESPACE tbs</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">DATAFILE '/u01/oradata/tbs01.dbf' SIZE 200M</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;"><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">AUTOEXTEND ON NEXT 10M MAXSIZE 500M</span>;</span></div></div><div><br/></div><div><br/></div><div><span style="font-size: 12pt;">2）修改表空间数据文件的大小</span></div><ul><li><div><span style="font-size: 12pt; color: black;">手工使用</span><span style="font-size: 12pt; color: black;">ALTER</span> <span style="font-size: 12pt; color: black;">DATABASE</span><span style="font-size: 12pt; color: black;">增大</span><span style="font-size: 12pt; color: black;">或减小一个数据文件的大小</span></div></li><li><div><span style="font-size: 12pt; color: black;">增大数据文件的空间不用增加更多的数据文件</span></div></li><li><div><span style="font-size: 12pt; color: black;">手工改变数据文件的大小是回收未用的空间</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SQL&gt; ALTER DATABASE</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">DATAFILE '/u03/oradata/tbs02.dbf'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">RESIZE 200M;</span></div></div><div><br/></div><div><br/></div><div><span style="font-size: 12pt;">3）增加表空间的数据文件</span></div><ul><li><div><span style="font-size: 12pt; color: black;">增大表空间大小通过增加数据文件</span></div></li><li><div><span style="font-size: 12pt; color: black;">ADD</span> <span style="font-size: 12pt; color: black;">DATAFILE</span><span style="font-size: 12pt; color: black;">语句用于</span><span style="font-size: 12pt; color: black;">增加数据文件</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SQL&gt; ALTER TABLESPACE tbs</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">ADD DATAFILE '/u01/oradata/tbs03.dbf'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SIZE 200M;</span></div></div><div><br/></div><div><br/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">移动表空间数据文件</span></font></div><div><span style="font-size: 12pt;">1）ALTER DATABASE</span></div><ul><li><div><span style="font-size: 12pt; color: black;">ALTER DATABASE</span></div></li><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: black;">数据库必须</span><span style="font-size: 12pt; color: black;">(</span><span style="font-size: 12pt; color: black;">需要</span><span style="font-size: 12pt; color: black;">)</span><span style="font-size: 12pt; color: black;">在</span><span style="font-size: 12pt; color: black;">MOUNT</span><span style="font-size: 12pt; color: black;">状态</span></font></div></li><li><div><span style="font-size: 12pt; color: black;">目标数据文件必须存在</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SQL&gt; ALTER DATABASE RENAME</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">FILE '/u01/oradata/tbs01.dbf'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">TO '/u03/oradata/tbs01.dbf';</span></div></div><div><br/></div><div><span style="font-size: 12pt;">2）ALTER TABLESPACE</span></div><ul><li><div><span style="font-size: 12pt; color: black;">ALTER TABLESPACE</span></div></li><ul><li><div><span style="font-size: 12pt; color: black;">表空间必须离线</span></div></li><li><div><span style="font-size: 12pt; color: black;">目标数据文件必须存在</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt; font-family: SimSun;"><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SQL&gt; ALTER TABLESPACE tbs RENAME</span></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">DATAFILE '/u01/oradata/tbs01.dbf'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">TO '/u02/oradata/tbs01.dbf';</span></div></div><div><br/></div><div><a href="oracle移动数据文件的两种方法.html" style="color: rgb(105, 170, 53);">oracle移动数据文件的两种方法</a></div><div><br/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">重命名表空间名</span></font></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: black;">Oracle</span><span style="font-size: 12pt; color: black;">允</span><span style="font-size: 12pt; color: black;">许使用</span><span style="font-size: 12pt; color: black;">rename</span><span style="font-size: 12pt; color: black;">命令直接修改表空间名称，数据文件名称不会随之改变。</span></font></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SQL&gt; alter tablespace TBS rename to TBS_NEW;</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Tablespace altered.</span></div></div></div><div><br/></div><div><br/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">删除表空间</span></font></div><div><br/></div><ul><li><div><span style="color: black; font-size: 12pt;">下列情况不能删除表空间:</span></div></li><ul><li><div><span style="color: black; font-size: 12pt;">系统表空间</span></div></li><li><div><span style="color: black; font-size: 12pt;">有激活段的表空间</span></div></li></ul><li><div><span style="font-size: 12pt; color: black;">INCLUDING</span> <span style="font-size: 12pt; color: black;">CONTENTS</span><span style="font-size: 12pt; color: black;">将删除段</span></div></li><li><div><span style="font-size: 12pt; color: black;">INCLUDING CONTENTS AND</span> <span style="font-size: 12pt; color: black;">DATAFILES</span><span style="font-size: 12pt; color: black;">将删除数据文件</span></div></li><li><div><span style="font-size: 12pt; color: black;">CASCADE</span> <span style="font-size: 12pt; color: black;">CONSTRAINTS</span><span style="font-size: 12pt; color: black;">将删除</span><span style="font-size: 12pt; color: black;">所有一致性的限制</span></div></li></ul><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">SQL&gt; DROP TABLESPACE tbs_new</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">INCLUDING CONTENTS AND DATAFILES;</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 11pt;">Tablespace dropped.</span></div></div><div><br/></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: 宋体; font-size: 12pt; color: rgb(102, 102, 102);">--删除空的表空间，但是不包含物理文件</span></div><div><span style="font-family: 宋体; font-size: 12pt; color: rgb(102, 102, 102);">drop tablespace tablespace_name;</span></div><div><br/></div><div><span style="font-family: 宋体; font-size: 12pt; color: rgb(102, 102, 102);">--删除非空表空间，但是不包含物理文件</span></div><div><span style="font-family: 宋体; font-size: 12pt; color: rgb(102, 102, 102);">drop tablespace tablespace_name including contents;</span></div><div><br/></div><div><span style="font-family: 宋体; font-size: 12pt; color: rgb(102, 102, 102);">--删除空表空间，包含物理文件</span></div><div><span style="font-family: 宋体; font-size: 12pt; color: rgb(102, 102, 102);">drop tablespace tablespace_name including datafiles;</span></div><div><br/></div><div><span style="font-family: 宋体; font-size: 12pt; color: rgb(102, 102, 102);">--删除非空表空间，包含物理文件</span></div><div><span style="font-family: 宋体; font-size: 12pt; color: rgb(102, 102, 102);">drop tablespace tablespace_name including contents and datafiles;</span></div><div><br/></div><div><span style="font-family: 宋体; font-size: 12pt; color: rgb(102, 102, 102);">--如果其他表空间中的表有外键等约束关联到了本表空间中的表的字段，就要加上CASCADE CONSTRAINTS</span></div><div><span style="font-family: 宋体; font-size: 12pt; color: rgb(102, 102, 102);">drop tablespace tablespace_name including contents and datafiles CASCADE CONSTRAINTS;</span></div></div><div><br/></div><div><br/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">获取表空间相关信息</span></font></div><div><span style="color: black; font-family: SimSun; font-size: 12pt;">获取表空间和数据文件的信息:</span></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: black; font-family: SimSun;">表空间信息</span><span style="font-size: 12pt; color: black; font-family: Calibri;">:</span></font></div><div><span style="font-size: 12pt; font-family: &quot;Courier New&quot;;">    DBA_TABLESPACES</span></div><div><span style="color: black; font-family: &quot;Courier New&quot;; font-size: 12pt;">    V$TABLESPACE</span></div><div><br/></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: black; font-family: SimSun;">数据文件信息</span><span style="font-size: 12pt; color: black; font-family: &quot;Courier New&quot;;">:</span></font></div><div><span style="color: black; font-family: &quot;Courier New&quot;; font-size: 12pt;">    DBA_DATA_FILES</span></div><div><span style="color: black; font-family: &quot;Courier New&quot;; font-size: 12pt;">    V$DATAFILE</span></div><div><br/></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: black; font-family: SimSun;">临时数据文件信息</span><span style="font-size: 12pt; color: black; font-family: &quot;Courier New&quot;;">:</span></font></div><div><span style="color: black; font-family: &quot;Courier New&quot;; font-size: 12pt;">    DBA_TEMP_FILES</span></div><div><span style="color: black; font-family: &quot;Courier New&quot;; font-size: 12pt;">    V$TEMPFILE</span></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></div><div><br/></div></span>
</div></body></html> 