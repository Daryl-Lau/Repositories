<html>
<head>
  <title>类对象特殊方法——__str__()、__repr__()</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="770"/>
<h1>类对象特殊方法——__str__()、__repr__()</h1>

<div>
<span><div>类对象特殊方法——__str__()、__repr__()</div><div><br/></div><div>用于自定义并返回实例对象的字符串表示形式</div><div><br/></div><div>内置函数str()和repr()都返回对象的字符串表示，其区别在于：</div><div>str()的返回值是给用户看的，更加用户友好；</div><div>repr()的返回值是给程序开发看的，是为调试服务的；</div><div><br/></div><div>1、当在交互式命令行中直接打印一个实例对象时，如果在实例对象对应的类对象中实现了特殊方法__repr__()，会自动调用该方法；</div><div>        否则，会打印实例对象对应的类对象在内存中的地址。</div><div><br/></div><div>2、当调用内置函数print打印一个实例对象时，</div><div>        如果在实例对象对应的类对象中实现了特殊方法__str__()，会自动调用__str__()方法；</div><div>        否则，如果在实例对象对应的类对象实现了特殊方法__repr__()，会自动调用__repr__()方法；</div><div>        否则，会打印实例对象对应的类对象在内存中的地址。</div><div><br/></div><div>3、当调用内置函数str创建字符串，并且实参时一个实例对象时，</div><div>        如果在实例对象的类对象中实现了特殊方法__str__()，在内置函数str的内部会自动调用__str__()方法；</div><div>        否则，如果在实例对象对应的类对象中实现了特殊方法__repr__()，在内置函数str的内部会自动调用__repr__()方法；</div><div>        否则，会打印实例对象对应的类对象和实例对象在内存中的地址</div><div><br/></div><div>4、当调用内置函数repr创建字符串，并且实参时一个实例对象时，</div><div>        如果在实例对象的类对象中实现了特殊方法__repr__()，在内置函数str的内部会自动调用__repr__()方法；</div><div>        否则，会打印实例对象对应的类对象和实例对象在内存中的地址</div><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"></col><col style="width: 130px;"></col><col style="width: 130px;"></col><col style="width: 130px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>打印方式</div></td><td colspan="3" style="border: 1px solid rgb(204, 204, 204); width: 390px; padding: 8px;"><div>调用顺序</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>直接打印</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>__repr__()</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>内存地址</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><br/></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;">print()</td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;">__str__()</td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>__repr__()</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>内存地址</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;">str()</td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>__srt__()</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>__repr__()</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;">内存地址</td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;">repr()</td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>__repr__()</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>内存地址</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><br/></div></td></tr></tbody></table><div><br/></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; class MyClass(object):</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">...     pass</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">...</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; mc = MyClass()</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; mc</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&lt;__main__.MyClass object at 0x7f2c301f9470&gt;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; print(mc)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&lt;__main__.MyClass object at 0x7f2c301f9470&gt;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; str(mc)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'&lt;__main__.MyClass object at 0x7f2c301f9470&gt;'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; repr(mc)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'&lt;__main__.MyClass object at 0x7f2c301f9470&gt;'</span></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; class MyClass2(object):</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">...     def __str__(self):</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">...         return '__str__()被调用了'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">...</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; mc2 = MyClass2()</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; mc2</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&lt;__main__.MyClass2 object at 0x7f2c301f95f8&gt;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; print(mc2)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">__str__()被调用了</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; str(mc2)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'__str__()被调用了'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; repr(mc2)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'&lt;__main__.MyClass2 object at 0x7f2c301f95f8&gt;'</span></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; class MyClass3(object):</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">...     def __repr__(self):</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">...         return '__repr__()被调用了'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">...</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; mc3 = MyClass3()</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; mc3</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">__repr__()被调用了</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; print(mc3)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">__repr__()被调用了</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; str(mc3)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'__repr__()被调用了'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; repr(mc3)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'__repr__()被调用了'</span></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; class MyClass4(object):</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">...     def __str__(self):</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">...         return '__str__()被调用了'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">...     def __repr__(self):</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">...         return '__repr__()被调用了'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">...</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; mc4 = MyClass4()</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; mc4</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">__repr__()被调用了</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; print(mc4)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">__str__()被调用了</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; str(mc4)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'__str__()被调用了'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; repr(mc4)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'__repr__()被调用了'</span></div></div><div><br/></div><div>通常__str__()和__repr__()实现代码是一样的，因此我们可以将定义的其中一个的方法名赋值给另外一个方法名</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 0, 255); font-size: 9pt;">#!/usr/bin/python3</span></div><div><br style="font-family: DejaVu Sans Mono; font-size: 9pt; color: rgb(0, 128, 0);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(200, 175, 0); font-size: 9pt;">class</span> <span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 205, 205); font-size: 9pt;">MyClass5</span><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">(</span><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 205, 205); font-size: 9pt;">object</span><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">):</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">   </span> <span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(200, 175, 0); font-size: 9pt;">def</span> <span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 205, 205); font-size: 9pt;">__str__</span><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">(self):</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">       </span> <span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(200, 175, 0); font-size: 9pt;">return</span> <span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(187, 0, 0); font-size: 9pt;">'xxx'</span></div><div><br style="font-family: DejaVu Sans Mono; font-size: 9pt; color: rgb(0, 128, 0);"/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">    __repr__ = __str__</span></div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></span>
</div></body></html> 