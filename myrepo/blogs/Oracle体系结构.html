<html>
<head>
  <title>Oracle体系结构</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="479"/>
<h1>Oracle体系结构</h1>

<div>
<span><div><div><span style="font-size: 12pt; font-weight: bold;">Oracle体系结构</span></div><div><br/></div><div>一、体系结构图</div><div><span style="font-size: 12pt;"><img src="Oracle体系结构_files/Image.png" type="image/png" data-filename="Image.png"/></span></div><div><br/></div><div><br/></div><div><span style="min-height: 12pt;"><span style="font-size: 12pt; font-family: SimSun;">oracle实例=SGA区+后台进程</span></span></div><div style="min-height: 12pt;"><span style="min-height: 12pt;"><span style="font-size: 12pt; font-family: SimSun;">oracle服务器=oracle实例+oracle数据库</span></span></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">数据库实例启动实质上即为：分配</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">SGA</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">区，启动后台进程</span></font></div><div style="min-height: 14pt;"><span style="min-height: 14pt; font-size: 12pt; font-family: Calibri; font-weight: bold;">Oracle</span> <span style="min-height: 14pt; font-size: 12pt; font-family: SimSun;">实例</span></div><div style="min-height: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">1</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">、是访问</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">Oracle</span> <span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">数据库的一种方式</span></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">2</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">、通常只开一个且仅开一个数据库</span></font></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">3</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">、由内存结构和进程结构组成，即</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">SGA</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">区</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">+</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">后台进程</span></font></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">连接</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">Oracle</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">实例：包括建立用户连接和创建会话</span></font></div><div style="min-height: 14pt;"><font style="font-size: 12pt;"><span style="min-height: 14pt; font-size: 12pt; font-family: Calibri; font-weight: bold;">Oracle</span><span style="min-height: 14pt; font-size: 12pt; font-family: SimSun;">数据库</span></font></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">是作为整体的数据集，由四类文件组成：</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">Data files, Control files, Redo log files, parameter file</span></font></div><div style="min-height: 14pt;"><div><br/></div></div><div style="min-height: 14pt;"><span style="min-height: 14pt;"><span style="font-size: 12pt; font-family: SimSun;">二、物理结构<span style="font-size: 12pt; background-color: rgb(255, 250, 165); font-family: SimSun; color: rgb(227, 0, 0);-evernote-highlight:true;">（四大文件：</span><span style="min-height: 12pt; font-size: 12pt; background-color: rgb(255, 250, 165); font-family: SimSun; color: rgb(227, 0, 0);-evernote-highlight:true;">data files ,control files,redo-log files，<span style="min-height: 12pt; font-size: 12pt; background-color: rgb(255, 250, 165); font-family: SimSun; color: rgb(227, 0, 0);-evernote-highlight:true;">Parameter file</span></span><span style="font-size: 12pt; background-color: rgb(255, 250, 165); font-family: SimSun; color: rgb(227, 0, 0);-evernote-highlight:true;">）</span></span></span></div><div style="min-height: 12pt;"><span style="min-height: 12pt;"><span style="font-size: 12pt; font-family: SimSun;">主要由三类文件组成：data files ,control files,redo-log files</span></span></div><div style="min-height: 12pt;"><span style="min-height: 12pt;"><span style="font-size: 12pt; font-family: SimSun;">1.data files： 数据文件，存放基本表信息（即表中数据等）、索引信息（系统内建有索引表）、回退信息（主要为数据的rollback）、临时信息（如有orderby 等操作时系统有临时信息）、系统引导信息（如数据字典等）</span></span></div><div style="min-height: 12pt;"><span style="min-height: 12pt;"><span style="font-size: 12pt; font-family: SimSun;">2、control files：控制文件（二进制的）。存放库物理结构、库名、库创建日期、序列号（存有同步信息）；控制文件至少有两个一摸一样的，用做备份用参数Control files=/../../文件名1,/../../文件名2；指定</span></span></div><div style="min-height: 12pt;"><span style="min-height: 12pt;"><span style="font-size: 12pt; font-family: SimSun;">3、redo log files：回退日志文件，存放修改前后的信息，主要用于数据的恢复，一个数据库至少有两个redo log files文件，以便可以循环记录信息</span></span></div><div style="min-height: 12pt;"><span style="min-height: 12pt;"><span style="font-size: 12pt; color: rgb(227, 0, 0); font-family: SimSun;">注：三类文件都有序列号，必须同步才能使用，且以Control files中的序列号为准，其他的必须与其保持一致</span></span></div><div style="min-height: 12pt;"><span style="min-height: 12pt;"><span style="font-size: 12pt; font-family: SimSun;">除了上面三类文件还有：Parameter file(参数文件)，Password file(口令文件)，Archived log files（归档文件）等</span></span></div><div style="min-height: 12pt;"><span style="min-height: 12pt;"><span style="font-size: 12pt; color: rgb(227, 0, 0); font-family: SimSun;">参数文件：有二进制、文本两种，用于设定参数的值。二进制参数文件可以及时更改，即时生效；文本参数文件需重启</span></span></div><div style="min-height: 12pt;"><span style="min-height: 12pt;"><span style="font-size: 12pt; font-family: SimSun;">口令文件：可用orapwd.exe 建口令文件。拥有sysdba权限的用户存在口令文件中，数据库未打开时即可使用，而普通用户需要数据库启动后方可登陆</span></span></div><div style="min-height: 12pt;"><span style="min-height: 12pt;"><span style="font-size: 12pt; font-family: SimSun;">可以 connect 用户名/口令 as sysdba</span></span></div><div style="min-height: 12pt;"><span style="min-height: 12pt;"><span style="font-size: 12pt; font-family: SimSun;">归档文件：存放归档的日志文件等，即有日志文件循环满时拷贝出去归档。在一个日志文件写满切换到另一个日志文件的同时联机的日志文件将拷贝出归档，并更新序列号（每换 一次，序列号加1）。若数据库允许归档方式的恢复时系统会自动生成归档文件，可用于恢复数据库，恢复到错误之前的点上。</span></span></div><div style="min-height: 14pt;"><div><br/></div></div><div style="min-height: 14pt;"><span style="min-height: 14pt;"><span style="font-size: 12pt; font-family: SimSun;">三、内存结构<span style="font-size: 12pt; background-color: rgb(255, 250, 165); font-family: SimSun; color: rgb(227, 0, 0);-evernote-highlight:true;">（三大内存：</span><span style="min-height: 12pt; font-size: 12pt; background-color: rgb(255, 250, 165); font-family: Calibri; color: rgb(227, 0, 0);-evernote-highlight:true;">Database buffer，<span style="min-height: 12pt; font-size: 12pt; background-color: rgb(255, 250, 165); font-family: Calibri; color: rgb(227, 0, 0);-evernote-highlight:true;">Shared pool，<span style="min-height: 12pt; font-size: 12pt; background-color: rgb(255, 250, 165); font-family: Calibri; color: rgb(227, 0, 0);-evernote-highlight:true;">Redo log buffer</span></span></span><span style="font-size: 12pt; background-color: rgb(255, 250, 165); font-family: SimSun; color: rgb(227, 0, 0);-evernote-highlight:true;">）</span></span></span></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">主要分为：</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">PGA</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">区，</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">SGA</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">区</span></font></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">PGA</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">区：程序的全局区，不可共享，存放用户信息。在服务进程启动时启动</span></font></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">SGA</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">区：系统全局区，为所有用户共享；在实例启动时分配，是实例的基本组成部分</span></font></div><div style="min-height: 12pt;"><span style="min-height: 12pt; font-size: 12pt;"><span style="font-size: 12pt; color: rgb(227, 0, 0); font-family: Calibri;">Shared pool</span></span> <span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">大小由</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">Shared_pool_size</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">决定</span></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">Data Dictionary cache:</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">数据字典缓冲区，在数据库启动时将最常用的数据字典存入缓存区，在系统启动时即放入</span></font></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">Library cache :</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">库缓冲区：缓存</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">SQL</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">脚本，分析表，方案等，</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">PL/SQL</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">的过程；分为：</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">SQL</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">区，</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">PL/SQL</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">区；使用最近最少使用淘汰算法（</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">LRU</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">）</span></font></div><div style="min-height: 12pt;"><span style="min-height: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(227, 0, 0); font-family: Calibri;">Database buffer</span></span></span></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">Dirty buffer:</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">存放已经修改并且</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">commit</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">但仍未写入磁盘的信息</span></font></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">Free buffer :</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">内存与磁盘上对应信息一致的（如已经写入磁盘后的）</span></font></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">Pinned buffer:</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">正在更新，尚未提交</span></font></div><div style="min-height: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">所有的数据更新都首先与</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">data buffer</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">交互，然后才能与磁盘交互，</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">Oracle</span> <span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">的</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">I/O</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">最小单位为</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">block(</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">块</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">)</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">，而不是以数据为单位，因此都要经过</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">data buffer</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">的缓冲。</span></div><div style="min-height: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">当读入时存入</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">free buffer,</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">当</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">free buffer</span> <span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">不足时系统将</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">dirty buffer</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">中存入磁盘而变为</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">free buffer,</span></div><div style="min-height: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">Data buffer</span> <span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">由</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">db_cache_size</span> <span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">决定大小。主要是为了提高操作数据的效率，缓冲区采用最近最少使用淘汰算法（</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">LRU</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">）</span></div><div style="min-height: 12pt;"><span style="min-height: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(227, 0, 0); font-family: Calibri;">Redo log buffer</span></span></span></div><div style="min-height: 12pt;"><span style="min-height: 12pt;"><span style="font-size: 12pt; font-family: SimSun;">记录了对数据库数据的所有更改，主要是为了恢复</span></span></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">Java pool</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">（可选）</span></font></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">当前端为</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">java</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">开发时，需手动设置，用于记录</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">java</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">代码</span></font></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">Large pool</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">（可选）</span></font></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">当为共享服务器时，需手动设置（使用的不是</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">LRU</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">管理）</span></font></div><div style="min-height: 12pt;"><span style="min-height: 12pt;"><span style="font-size: 12pt; font-family: SimSun;">控制参数：</span></span></div><ul><li><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">SGA_MAX_SIZE :</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">设置</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">SGA</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">区的大小，可以动态调整</span></font></div></li><li><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">Db_cache_size :</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">设置</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">database buffer</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">的大小</span></font></div></li><li><div style="min-height: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">Shared_pool_size</span> <span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">设置</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">shared pool</span> <span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">大小</span></div></li><li><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">Log_buffer:</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">设置</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">redo log buffer</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">的大小</span></font></div></li><li><div style="min-height: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">Large_pool_size</span> <span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">设置</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">large pool</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">的大小</span></div></li><li><div style="min-height: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">Java_pool_size</span> <span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">设置</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">java pool</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">的大小</span></div></li></ul><div style="min-height: 14pt;"><div><br/></div></div><div style="min-height: 14pt;"><span style="min-height: 14pt;"><span style="font-size: 12pt; font-family: SimSun;">四、进程结构<span style="font-size: 12pt; background-color: rgb(255, 250, 165); font-family: SimSun; color: rgb(227, 0, 0);-evernote-highlight:true;">（五大进程：</span><span style="min-height: 12pt; font-size: 12pt; background-color: rgb(255, 250, 165); font-family: Calibri; color: rgb(227, 0, 0);-evernote-highlight:true;">DBWn,LGWR,SMON,PMON,CKPT</span><span style="font-size: 12pt; background-color: rgb(255, 250, 165); font-family: SimSun; color: rgb(227, 0, 0);-evernote-highlight:true;">）</span></span></span></div><div style="min-height: 12pt;"><span style="min-height: 12pt;"><span style="font-size: 12pt; font-family: SimSun;">用户进程：连接服务器时在客户端产生</span></span></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">必须先建立连接，不直接与</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">Oralce</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">服务器交互，而是与服务器进程交互</span></font></div><div style="min-height: 12pt;"><span style="min-height: 12pt;"><span style="font-size: 12pt; font-family: SimSun;">服务器进程：客户端连入时服务器完成客户端的请求操作</span></span></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">直接与</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">Oracle</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">服务器交互，接收用户进程的请求，完成操作并返回结果。服务器有专用服务器、共享服务器两种方式：</span></font></div><div style="min-height: 12pt;"><span style="min-height: 12pt;"><span style="font-size: 12pt; font-family: SimSun;">专用服务器：服务器进程与用户进程一一对应，但由于资源总量有限，服务器进程的总量是有限的，因此连入的数量也是有限的，当达到上限时用户无法连入。</span></span></div><div style="min-height: 12pt;"><span style="min-height: 12pt;"><span style="font-size: 12pt; font-family: SimSun;">共享服务器：系统启动时即创建一定数量的服务器进程，当用户连入时，选择空闲的服务器进程为之服务，而且共享服务器中服务器进程也是可以动态生成的，可以设置服务器进程生成的最大数量。</span></span></div><div style="min-height: 12pt;"><div><br/></div></div><div style="min-height: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">后台进程：主要有：</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">DBWn,LGWR,SMON,PMON,CKPT</span> <span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">此为必须的，其他的如</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">ARCn,RECO,LCK</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">等是可选的。在实例启动时启动。</span></div><div style="min-height: 12pt;"><div><br/></div></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">1</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">、</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">DBWn</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">：表示最多可以产生</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">10</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">个</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">DBWR</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">进程，命名为</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">DBW0.</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">.</span><span style="min-height: 12pt; font-size: 12pt;"><span style="font-size: 12pt; font-family: Calibri;">DBW9</span></span></font></div><div style="min-height: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">作用：将</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">database buffer</span> <span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">的</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">buffer cache</span> <span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">中的内容写入磁盘，当单</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">CPU</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">时只能有一个</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">DBW0</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">，当有多个</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">CPU</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">时才能有多个</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">DBWR</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">进程。</span></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">启动条件：一般情况下</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">DBWR</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">进程都处于休眠状态，当满足条件时才启动：</span></font></div><ol><li><div style="min-height: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">没有</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">free buffer</span> <span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">时，即没有空闲</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">buffer</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">则需要写回磁盘。</span></div></li><li><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">dirty buffers</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">中数据达到一定阀值时。</span></font></div></li><li><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">超时发生时（默认</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">3</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">秒）</span></font></div></li><li><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">检查点发生</span></font></div></li><li><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">RAC ping</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">连接请求</span></font></div></li><li><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">表空间</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">offline</span></font></div></li><li><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">表空间</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">read only</span></font></div></li><li><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">表</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">drop</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">或</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">TRUNCATE</span></font></div></li><li><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">表空间开始备份</span></font></div></li></ol><div style="min-height: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">在以下情况下检查点会发生：</span></div><ol><li><div style="min-height: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">日志切换</span> </div></li><li><div style="min-height: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">用户发命令强制产生检查点</span> </div></li><li><div style="min-height: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">数据库关闭时：以</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">normal, transactional, immediate</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">方式；</span></div></li><li><div style="min-height: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">某表空间转为</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">offline</span></div></li></ol><div style="min-height: 12pt;"><div><br/></div></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">2</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">、</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">Log writer</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">（</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">LGWR</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">）</span></font></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">作用：将</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">log buffer</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">里的内容写入</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">log</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">文件</span></font></div><div style="min-height: 12pt;"><span style="min-height: 12pt;"><span style="font-size: 12pt; font-family: SimSun;">启动条件：</span></span></div><ol><li><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">buffer</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">中的数据量达到</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">1/3.</span></font></div></li><li><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">数据量达到</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">1m</span></font></div></li><li><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">时间间隔到时（规定的时间间隔是</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">3s</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">）</span></font></div></li><li><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">检查点发生</span></font></div></li><li><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">在</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">DBWn</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">写之前</span></font></div></li><li><div style="min-height: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">commit</span> <span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">命令</span></div></li></ol><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">其实：检查点发生则</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">DBWn</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">将启动</span></font></div><div style="min-height: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">当</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">U2</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">发出</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">commit</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">命令时则启动</span> <span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">log writer</span> <span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">的</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">LGWR</span> <span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">进程，将</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">U1</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">，</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">U2</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">的修改前后信息写入</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">log</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">文件，当发生错误而恢复时，有专门的进程（</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">SMON</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">）使用</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">log</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">文件进行恢复，根据错误发生的记录进行</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">redo</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">操作，利用回退段</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">undo</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">，使错误发生前没有提交的操作全部撤销，从而得到一个完整的正常系统状态。若</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">U2</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">提交了</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">commit</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">而</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">U1</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">没有提交，那么此时发生故障，要进行恢复，则</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">U2</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">可以恢复到当前</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">commit</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">后的状态，所有</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">U2</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">以前的操作将保留有效，而</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">U1</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">则回退到上一个</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">commit</span><span style="font-size: 12pt; min-height: 12pt; font-family: Calibri;">的状态，这段时间内的修改将失效，由undo</span><span style="font-size: 12pt; min-height: 12pt; font-family: SimSun;">回退。整个系统回退到一个完整的正常状态。</span></div><div style="min-height: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">只有</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">LGWR</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">写完成时</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">commit</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">操作才算完成，因此不会出现提示</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">commit</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">完成而没有将相应的日志写入。可以对应这种情况：当提交</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">commit</span> <span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">命令后，系统提示操作生效，而此时由于内容不多，操作的结果都由系统暂时存在内存中而没有即时写入磁盘，而此时系统崩溃，则内存中的数据丢失，而磁盘上也没有保留，则在下次启动时，系统会自动调用</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">SMON</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">进程进行恢复，从而不会使真正更新过的数据得不到保留。</span></div><div style="min-height: 12pt;"><div><br/></div></div><div style="min-height: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">3</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">、</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">SMON</span> <span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">系统监控进程</span></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">作用：</span></font></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;"> 1.实例恢复（由系统自动调用）：</span></font></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">            a</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">、将</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">redo log</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">文件中提交的信息重做一遍</span></font></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">            b</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">、将没有提交的信息进行回退，即</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">undo</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">；</span></font></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">            c</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">、将数据库打开，用户可以登录</span></font></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;"> 2.回收临时段</span></font></div><div style="min-height: 12pt;"><div><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;"> 3.每</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">3</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">秒回收一次自由空间，合并自由空间</span></font></div></div><div style="min-height: 12pt;"><div><br/></div></div><div style="min-height: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">4</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">、</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">PMON</span> <span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">进程监控进程</span></div><div style="min-height: 12pt;"><span style="min-height: 12pt;"><span style="font-size: 12pt; font-family: SimSun;">作用：检查到别的进程失败后清理垃圾用的：回退事务、释放锁、回收释放资源、报告失败信息。</span></span></div><div style="min-height: 12pt;"><div><br/></div></div><div style="min-height: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">5</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">、</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">CKPT</span> <span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">检查点进程，在检查点发生时启动</span></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">作用：</span></font></div><ol><li><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">当检查点发生时通知</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">DBWn</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">；</span></font></div></li><li><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">使用检查点的信息来更新数据文件头；</span></font></div></li><li><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">用检验点的信息来更新控制文件</span></font></div></li></ol><div style="min-height: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">可选的：</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">ARCn</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">：归档进程，在归档方式下才有该进程，将写满的</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">log file</span> <span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">写出来，写到</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">ARC01.file</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">等文件中；</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">REC0:</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">恢复进程，运行在分布式环境下；</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">LCKn</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">：锁进程，在并行服务器方式下。</span></div><div style="min-height: 14pt;"><font style="font-size: 12pt;"><span style="min-height: 14pt; font-size: 12pt; font-family: SimSun;">执行一条</span><span style="min-height: 14pt; font-size: 12pt; font-family: Calibri; font-weight: bold;">SQL</span><span style="min-height: 14pt; font-size: 12pt; font-family: SimSun;">语句</span></font></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">1</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">）连接实例，使用到用户进程，服务器进程</span></font></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">2</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">）执行语句，后台进程使用哪个将由</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">SQL</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">语句决定：查询语句、</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">DML</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">语句、</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">commit</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">将会使用不同的后台进程，也可能部分后台进程不参与该语句的执行</span></font></div><div style="min-height: 14pt;"><div><br/></div></div><div style="min-height: 14pt;"><span style="min-height: 14pt;"><span style="font-size: 12pt; font-family: SimSun;">五、逻辑结构</span></span></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">数据库由一个或多个表空间（</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">tablespace</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">）组成</span></font></div><div style="min-height: 12pt;"><span style="min-height: 12pt;"><span style="font-size: 12pt; font-family: SimSun;">表空间</span></span></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">System-----------------------</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">系统引导段</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">-</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">&gt;数据字典</span></font></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">Undo tbs---------------------</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">撤销段（回退段）</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">-</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">&gt;修改前的信息</span></font></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">Temp--------------------------</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">临时段</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">-&gt;</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">临时使用的（如</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">order by</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">操作）</span></font></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">Users--------------------------</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">数据段</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">-</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">&gt;每建一个表则对应一个数据段</span></font></div><div style="min-height: 12pt;"><font style="font-size: 12pt;"><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">Index--------------------------</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">索引段</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">-&gt;</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">索引信息（关键字，</span><span style="min-height: 12pt; font-size: 12pt; font-family: Calibri;">RowId</span><span style="min-height: 12pt; font-size: 12pt; font-family: SimSun;">）</span></font></div><div style="min-height: 12pt;"><span style="min-height: 12pt;"><span style="font-size: 12pt; font-family: SimSun;">表示一个或多个组成</span></span></div><div style="min-height: 13pt;"><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">撤销段：作</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">commit</span> <span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">操作后其中的信息就没用了，自动被重用；作</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">rollback</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">时就要用到其中的信息，回退后该段空间又可被重用。</span></div><div style="min-height: 13pt;"><font style="font-size: 12pt;"><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">I/O</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">的最小单位是块，而分配的最小单位是区，一个区由一个或多个块组成。</span></font></div><div style="min-height: 13pt;"><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">建表时系统先分配：</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">initial extent</span> <span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">空间，当不断插入数据使空间满时，将再次自动分配空间</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">next extent,</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">当再次不足时将再次自动分配</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">next*(1+PCTINCREASE),</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">再次将为next*(1+PCTINCREASE)</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">2</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">，下次将为</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">next*(1+PCTINCREASE)</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">3</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">；如此下去。其中，</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">next</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">是设定额下一个分配的空间大小，</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">PCTINCREASE</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">则为递增的比例。另有：</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">maxextent=100,</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">设置最多只能分配</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">100</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">个区，</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">minextents</span> <span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">表示建好表后最少要分配几个区。</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">Initial extent, next extent, PCTINCREASE,maxextent,minextents</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">一个区的五个参数，与</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">datafile</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">里的五类信息相对应。</span></div><div style="min-height: 13pt;"><span style="min-height: 13pt;"><span style="font-size: 12pt; font-family: SimSun;">当插入数据受限时有可能是下列原因：</span></span></div><div style="min-height: 13pt;"><font style="font-size: 12pt;"><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">1</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">、</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">table space</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">占用完，即没有了表空间</span></font></div><div style="min-height: 13pt;"><font style="font-size: 12pt;"><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">2</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">、分区数达到上限，此时可以调高上限，即调高</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">maxextents</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">的值</span></font></div><div style="min-height: 13pt;"><font style="font-size: 12pt;"><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">3</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">、当</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">maxextents</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">值达到系统设定的上限时，可以重新建表空间，调高</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">initial extent</span></font></div><div style="min-height: 13pt;"><span style="min-height: 13pt;"><span style="font-size: 12pt; font-family: SimSun;">逻辑结构与物理结构的对应</span></span></div><div style="min-height: 13pt;"><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">物理上数据库由</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">data files,redo log files,control files</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">组成，任何一个表空间至少对应一个或多个</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">data files,</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">多个</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">data files</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">的总和即为表空间的大小，所以当表空间的大小不足时解决的办法之一可以是再增加</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">data files</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">，而一个</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">data files</span> <span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">只能对应一个表空间。段不可以跨越表空间，但可以跨越同一个表空间的不同的</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">data files</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">，段的所有信息都存在</span> <span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">data files</span> <span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">文件中。</span></div><div style="min-height: 13pt;"><span style="min-height: 13pt;"><span style="font-size: 12pt; font-family: SimSun;">建表时可以自己指定表空间以及相应的分区参数</span></span></div><div style="min-height: 13pt;"><font style="font-size: 12pt;"><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">Create table student(</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">建表语句</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">...) //</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">建表时可以直接指定表空间和存储参数</span></font></div><div style="min-height: 13pt;"><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">Tablespace</span> <span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">表空间</span> <span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">index…</span></div><div style="min-height: 13pt;"><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">Storage ( initial 128k //</span> <span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">初始区大小</span></div><div style="min-height: 13pt;"><font style="font-size: 12pt;"><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">Next 128k //</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">次分区大小</span></font></div><div style="min-height: 13pt;"><font style="font-size: 12pt;"><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">Pctincrease 100 //</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">扩充的百分比</span></font></div><div style="min-height: 13pt;"><font style="font-size: 12pt;"><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">Maxextents 10000 //</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">最大的分区数</span></font></div><div style="min-height: 13pt;"><span style="min-height: 13pt;"><span style="font-size: 12pt; font-family: Calibri;">)</span></span></div><div style="min-height: 13pt;"><font style="font-size: 12pt;"><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">如果没有指定相应的参数：安装建库</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">-</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">》建表空间</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">-</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">》建撤销段</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">-</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">》建用户</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">-</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">》给用户授权</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">-</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">》用户登录建表</span></font></div><div style="min-height: 13pt;"><font style="font-size: 12pt;"><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">注：建表空间：系统默认</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">system tablespace</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">，其他表空间可以在建库之后建立</span></font></div><div style="min-height: 13pt;"><span style="min-height: 13pt;"><span style="font-size: 12pt; font-family: SimSun;">建表空间：</span></span></div><div style="min-height: 13pt;"><span style="min-height: 13pt;"><span style="font-size: 12pt; font-family: Calibri;">Create tablespace test</span></span></div><div style="min-height: 13pt;"><font style="font-size: 12pt;"><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">Datafile '</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">该表空间在操作系统中的路径</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">\</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">文件名</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">.dbf' size 100m //</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">设置大小</span></font></div><div style="min-height: 13pt;"><span style="min-height: 13pt;"><span style="font-size: 12pt; font-family: Calibri;">… …</span></span></div><div style="min-height: 13pt;"><span style="min-height: 13pt;"><span style="font-size: 12pt; font-family: Calibri;">Default storage(initial 128k</span></span></div><div style="min-height: 13pt;"><span style="min-height: 13pt;"><span style="font-size: 12pt; font-family: Calibri;">next 128k</span></span></div><div style="min-height: 13pt;"><span style="min-height: 13pt;"><span style="font-size: 12pt; font-family: Calibri;">pctincrease 100</span></span></div><div style="min-height: 13pt;"><span style="min-height: 13pt;"><span style="font-size: 12pt; font-family: Calibri;">maxextents 10000</span></span></div><div style="min-height: 13pt;"><span style="min-height: 13pt;"><span style="font-size: 12pt; font-family: Calibri;">)</span></span></div><div style="min-height: 13pt;"><span style="min-height: 13pt;"><span style="font-size: 12pt; font-family: SimSun;">建用户：</span></span></div><div style="min-height: 13pt;"><font style="font-size: 12pt;"><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">Create user student identified by student //</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">用户名：</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">student,</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">密码：</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">student</span></font></div><div style="min-height: 13pt;"><font style="font-size: 12pt;"><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">default tablespace test //</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">设置用户的默认表空间</span></font></div><div style="min-height: 13pt;"><font style="font-size: 12pt;"><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">temporary tablespace temp //</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">临时表空间</span></font></div><div style="min-height: 13pt;"><span style="min-height: 13pt;"><span style="font-size: 12pt; font-family: SimSun;">默认表空间表示的是：当用户新建表时（或任何对象），当未指定表空间时，则将使用默认的表空间，使其存放在该表空间中。</span></span></div><div style="min-height: 13pt;"><font style="font-size: 12pt;"><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">临时表空间：当使用到排序是需要使用临时表时，使用在临时表空间的临时段，使用完后由</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">SMON</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">自动回收。</span></font></div><div style="min-height: 13pt;"><span style="min-height: 13pt;"><span style="font-size: 12pt; font-family: SimSun;">· 至于在建表时若指定了存储参数，则以此参数为准，若没有指定则用其所在表空间的存储参数（即在建表空间时指定的默认存储参数），如果在建表空间时也未指定</span></span></div><div style="margin: 0mm 0mm 0.56mm; text-indent: 0mm; min-height: 11pt;"><span style="text-indent: 0mm; min-height: 11pt;"><span style="font-size: 12pt; font-family: SimSun;">存储参数，则使用系统默认的参数，所以平时建表任何存储参数都不指定也是完全可以的。</span></span></div><div style="margin: 0mm 0mm 0.56mm; text-indent: 0mm; min-height: 13pt;"><span style="text-indent: 0mm; min-height: 13pt;"><span style="font-size: 12pt; font-family: SimSun;">· 区的分配等都由系统处理，但可以人为修改某些参数优化系统。</span></span></div><div><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">· 二进制参数修改，可以用命令修改：</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">alter system set</span> <span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">参数</span><span style="min-height: 13pt; font-size: 12pt; font-family: Calibri;">=</span><span style="min-height: 13pt; font-size: 12pt; font-family: SimSun;">…;</span></div></div><div><br/></div></span>
</div></body></html> 