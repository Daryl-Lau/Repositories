<html>
<head>
  <title>VLAN与交换价端口模式Access、Trunk、Hybrid</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="598"/>
<h1>VLAN与交换价端口模式Access、Trunk、Hybrid</h1>

<div>
<span><div><span style="font-size: 10pt;">VLAN与交换价端口模式Access、Trunk、Hybrid</span></div><div><br/></div><div><br/></div><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-variant-caps: normal; font-variant-ligatures: normal; font-size: 10pt;">交换机端口有三种工作模式，分别是Access，Hybrid，Trunk。</span></span></div><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-variant-caps: normal; font-variant-ligatures: normal; font-size: 10pt;">    Access类型的端口只能属于1个VLAN，一般用于连接计算机的端口；</span></span></div><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-variant-caps: normal; font-variant-ligatures: normal; font-size: 10pt;">    Trunk类型的端口可以允许多个VLAN通过，可以接收和发送多个VLAN的报文，一般用于交换机之间连接的端口；</span></span></div><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-variant-caps: normal; font-variant-ligatures: normal; font-size: 10pt;">    Hybrid类型的端口可以允许多个VLAN通过，可以接收和发送多个VLAN的报文，可以用于交换机之间连接，也可以用于连接用户的计算机。 </span></span></div><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-variant-caps: normal; font-variant-ligatures: normal; font-size: 10pt;">    </span></span></div><div><br/></div><div><span style="font-size: 10pt;">tag与untag</span></div><div><font style="font-size: 10pt;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 10pt; font-variant-caps: normal; font-variant-ligatures: normal;">    untag就是普通的ethernet报文，普通PC机的网卡是可以识别这样的报文进行通讯； </span></font></div><div><font style="font-size: 10pt;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 10pt; font-variant-caps: normal; font-variant-ligatures: normal;">    tag报文结构的变化是在源mac地址和目的mac地址之后，加上了4bytes的vlan信息，也就是vlan tag头；一般来说这样的报文普通PC机的网卡是不能识别的</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 10pt; font-variant-caps: normal; font-variant-ligatures: normal;"> </span></font></div><div><br/></div><div><span style="font-size: 10pt;">Access</span></div><div><span style="font-size: 10pt;">    收报文：判断报文是否有vlan信息，如果没有，则打上端口的缺省vlan id，如果有，则直接丢弃；</span></div><div><span style="font-size: 10pt;">    发报文：将报文的vlan信息剥离，直接发送出去</span></div><div><br/></div><div><span style="font-size: 10pt;">Trunk</span></div><div><span style="font-size: 10pt;">    收报文：判断报文是否有vlan信息，如果没有，则打上端口的缺省vlan id，并进行交换转发，如果有，则判断该trunk端口是否允许该vlan id的数据进入，如果可以则收报文，否则丢弃；</span></div><div><span style="font-size: 10pt;">    发报文：比较端口的缺省vlan id和将要发送报文的vlan id信息，如果两者相等则剥离vlan信息进行发送，否则直接转发;</span></div><div><br/></div><div><span style="font-size: 10pt;">Hybrid</span></div><div><span style="font-size: 10pt;">    收报文：判断报文是否有vlan信息，如果没有，则打上端口的缺省vlan id，并进行交换转发，如果有，则判断该hybrid口是否允许该vlan id的数据进入，如果可以则收报文，否则丢弃；</span></div><div><span style="font-size: 10pt;">    发报文：判断该vlan在本端口的属性（display interface可以看到该端口对哪些vlan是untag，哪些是tag），如果是untag，则剥离vlan信息发送，如果是tag则判断该vlan id与缺省vlan id是否相等，如果两者相等则剥离vlan信息转发，如果不相等则携带原有的vlan id进行转发；</span></div><div><br/></div><div><br/></div><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-variant-caps: normal; font-variant-ligatures: normal; color: rgb(227, 0, 0); font-size: 10pt;">Hybrid端口和Trunk端口在接收数据时，处理方法是一样的，唯一不同之处在于发送数据时：Hybrid端口可以允许多个VLAN的报文发送时不打标签，而Trunk端口只允许缺省VLAN的报文发送时不打标签。</span></span></div><div><br/></div><div><font color="#3665EE" style="font-size: 10pt;"><span style="box-sizing: border-box; outline: 0px; word-break: break-all; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(54, 101, 238); font-size: 10pt; font-variant-caps: normal; font-variant-ligatures: normal;">注：对于华为交换机缺省VLAN被称为“</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(54, 101, 238); font-size: 10pt; font-variant-caps: normal; font-variant-ligatures: normal;">Pvid Vlan</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(54, 101, 238); font-size: 10pt; font-variant-caps: normal; font-variant-ligatures: normal;">”， 对于思科交换机缺省VLAN被称为“</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(54, 101, 238); font-size: 10pt; font-variant-caps: normal; font-variant-ligatures: normal;">Native Vlan</span><span style="box-sizing: border-box; outline: 0px; word-break: break-all; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(54, 101, 238); font-size: 10pt; font-variant-caps: normal; font-variant-ligatures: normal;">”</span></font></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></span>
</div></body></html> 