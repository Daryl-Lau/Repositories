<html>
<head>
  <title>文件读写</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="815"/>
<h1>文件读写</h1>

<div>
<span><div>文件读写</div><div><br/></div><div>读写文件之前，必须先打开文件。</div><div><br/></div><div><span style="font-weight: bold;">打开文件</span></div><div>内置函数open()用于打开文件，函数的返回值是一个文件对象，通过该对象就可以操作文件了。</div><div>第一个参数是文件的路径，必须要指定。既可以指定绝对路径也可以指定相对路径</div><div>第二个参数是文件的打开方式，默认值是'r'，表示以只读方式打开。</div><div>其他参数都是带默认值的，可以参考官方文档。</div><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"></col><col style="width: 147px;"></col><col style="width: 330px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div style="text-align: center;">文件的打开方式</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 147px; padding: 8px;"><div style="text-align: center;">说明</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 330px; padding: 8px;"><div style="text-align: center;">备注</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div style="text-align: center;">'r'</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 147px; padding: 8px;"><div style="text-align: left;">以只读方式打开</div><div style="text-align: left;">只能读文件</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 330px; padding: 8px;"><div style="text-align: center;"><div style="text-align: left;">文件的默认打开方式</div><div style="text-align: left;">如果文件不存在，则抛出异常FileFoundError</div></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div style="text-align: center;">'w'</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 147px; padding: 8px;"><div style="text-align: center;"><div style="text-align: left;">以只写方式打开</div><div style="text-align: left;">只能写文件</div></div></td><td style="border: 1px solid rgb(204, 204, 204); width: 330px; padding: 8px;"><div style="text-align: center;"><div style="text-align: left;">如果文件存在，则清空文件</div><div style="text-align: left;">如果文件不存在，则创建文件</div></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div style="text-align: center;">'a'</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 147px; padding: 8px;"><div style="text-align: center;"><div style="text-align: left;">以追加方式打开</div><div style="text-align: left;">只能写文件</div></div></td><td style="border: 1px solid rgb(204, 204, 204); width: 330px; padding: 8px;"><div style="text-align: center;"><div style="text-align: left;">如果文件存在，则从文件末尾开始写</div><div style="text-align: left;">如果文件不存在，则创建文件</div></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div style="text-align: center;">'x'</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 147px; padding: 8px;"><div style="text-align: center;"><div style="text-align: left;">以只写方式打开</div><div style="text-align: left;">只能写文件</div></div></td><td style="border: 1px solid rgb(204, 204, 204); width: 330px; padding: 8px;"><div style="text-align: left;">如果文件存在，则抛出异常FileExistsError</div><div style="text-align: left;">如果文件不存在，则创建文件</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div style="text-align: center;">'+'</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 147px; padding: 8px;"><div style="text-align: center;"><div style="text-align: left;">以读写方式打开</div><div style="text-align: left;">可以读写文件</div></div></td><td style="border: 1px solid rgb(204, 204, 204); width: 330px; padding: 8px;"><div style="text-align: left;">不能单独使用，只能添加到其他打开方式的后面</div><div style="text-align: left;">'r+'：参见'r'的备注</div><div style="text-align: left;"><div>'w+'：参见'w'的备注</div></div><div style="text-align: left;"><div>'a+'：参见'a'的备注</div></div><div style="text-align: left;">'x+'：参见'x'的备注</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div style="text-align: center;">'t'</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 147px; padding: 8px;"><div style="text-align: left;">以文本方式打开</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 330px; padding: 8px;"><div style="text-align: left;"><div>文件默认打开方式</div><div>不能单独使用，只能添加到其他打开方式的后面：</div></div><div style="text-align: left;">'rt'，'wt'，'at'，'rt+'，'wt+'，'at+'，'xt+'</div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div style="text-align: center;">'b'</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 147px; padding: 8px;"><div style="text-align: left;">以二进制方式打开</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 330px; padding: 8px;"><div style="text-align: left;"><div>例如：打开图片</div><div>不能单独使用，只能添加到其他打开方式的后面：</div></div><div style="text-align: left;"><div>'rb'，'wb'，'ab'，'xb'，'rb+'，'wb+'，'ab+'，'xb+'</div></div></td></tr></tbody></table><div><br/></div></div><div><span style="font-weight: bold;">读文件</span></div><div>可以调用内置函数open()并以只读方式或读写方式打开文件。返回的文件对象有三个用于读文件的方法：</div><div>1、read([size])，<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">如果不关闭文件，每次调用此方法，将从上一次调用此方法的地方继续读取文件。</span></div><div>        如果不传参数，读到文件尾部。</div><div>        如果传入参数size，用于指定字节数，</div><div>                当指定的字节数小于读到文件尾的字节数时，读取指定的字节数；</div><div>                当指定的字节数大于读到文件尾的字节数时，或当指定的字节数小于0时，读取到文件尾部；</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh = open('a.txt', 'r')</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.read()</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'1234567890\nqwertyuiop\nasdfghjkl\nzxcvbnm\n'</span></div><div><br/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.read()   </span><span style="font-family: &quot;DejaVu Sans Mono&quot;; font-size: 9pt;"><font color="#0000FF"># 由于已经读到了文件尾部且没有关闭文件，再次调用将从尾部读取，没有读取到数据</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">''</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.close()</span></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh = open('a.txt', 'r')   </span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.read(-2)     </span><span style="font-family: &quot;DejaVu Sans Mono&quot;; font-size: 9pt;"><font color="#0000FF"># 传入负数，将直接读取到文件尾部</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'1234567890\nqwertyuiop\nasdfghjkl\nzxcvbnm\n'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.close()</span></div></div><div><br/></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">注意：如果文件较大，使用read()读取全部文件会导致内存占用较大，因此，最好多次调用read([size])，指定的size不要超过默认缓冲区的大小，否则，可能并不能读取到指定的字节数。</span></div><div>默认缓冲区大小通过标准库中io模块的DEFAULT_BUFFER_SIZE获取</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; import io</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; io.DEFAULT_BUFFER_SIZE</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">8192</span></div></div><div><br/></div><div>2、readline([size])，<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">如果不关闭文件，每次调用此方法，将从上一次调用此方法的地方继续读取文件。</span></div><div>        如果不传参数，读到行尾。</div><div>        如果传入参数size，用于指定字节数，</div><div>                当指定的字节数小于读到行尾的字节数时，读取指定的字节数；</div><div>                当指定的字节数大于读到行尾的字节数时，或当指定的字节数小于0时，读取到行尾部；</div><div>        总之，最多读到行尾。</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; font-size: 9pt;"><font color="#0000FF"># <span style="font-family: &quot;DejaVu Sans Mono&quot;; font-size: 9pt;">如果不传参数，读到行尾</span></font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh = open('a.txt', 'r')</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readline()</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'1234567890\n'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readline()</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'qwertyuiop\n'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readline()</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'asdfghjkl\n'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readline()</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'zxcvbnm\n'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readline()</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">''</span></div><div><span style="min-height: 10pt; font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.close()</span></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; font-size: 9pt;"><font color="#0000FF"># <span style="font-family: &quot;DejaVu Sans Mono&quot;; font-size: 9pt;">当指定的字节数小于读到行尾的字节数时，读取指定的字节数</span></font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh = open('a.txt', 'r')</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readline(7)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'1234567'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readline(7)     </span> <span style="font-family: &quot;DejaVu Sans Mono&quot;; font-size: 9pt;"><font color="#0000FF"># <span style="font-family: &quot;DejaVu Sans Mono&quot;; font-size: 9pt;">当指定的字节数大于读到行尾的字节数时，或当指定的字节数小于0时，读取到行尾部</span></font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'890\n'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readline(7)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'qwertyu'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readline(7)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'iop\n'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readline(7)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'asdfghj'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readline(7)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'kl\n'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readline(7)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'zxcvbnm'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readline(7)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'\n'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readline(7)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">''</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.close()</span></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; font-size: 9pt;"><font color="#0000FF"># <span style="font-family: &quot;DejaVu Sans Mono&quot;; font-size: 9pt;">当指定的字节数大于读到行尾的字节数时，或当指定的字节数小于0时，读取到行尾部</span></font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.close()</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh = open('a.txt', 'r')</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readline(20)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'1234567890\n'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readline(20)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'qwertyuiop\n'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readline(20)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'asdfghjkl\n'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readline(20)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'zxcvbnm\n'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readline(20)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">''</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.close()</span></div></div><div><br/></div><div>3、readlines([size])</div><div>        如果不传参数，读到文件尾部，返回每一行组成的列表。</div><div>        如果传入参数，size用于指定字节数，</div><div>                当指定的字节数小于读到文件尾的字节数时，一直读取到最后一个字符所在的行尾；</div><div>                当指定的字节数大于读到文件尾的字节数时，或当指定的字节数小于0时，读取到文件尾部；</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; font-size: 9pt;"><font color="#0000FF"># <span style="font-family: &quot;DejaVu Sans Mono&quot;; font-size: 9pt;">如果不传参数，读到文件尾部，返回每一行组成的列表</span></font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh = open('a.txt', 'r')</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readlines()</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">['1234567890\n', 'qwertyuiop\n', 'asdfghjkl\n', 'zxcvbnm\n']</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readlines()</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">[]</span></div><div><span style="min-height: 10pt; font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.close()</span></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; font-size: 9pt;"><font color="#0000FF"># <span style="font-family: &quot;DejaVu Sans Mono&quot;; font-size: 9pt;">当指定的字节数小于读到文件尾的字节数时，一直读取到最后一个字符所在的行尾</span></font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh = open('a.txt', 'r')</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readlines(5)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">['1234567890\n']</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readlines(5)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">['qwertyuiop\n']</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readlines(5)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">['asdfghjkl\n']</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readlines(5)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">['zxcvbnm\n']</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readlines(5)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">[]</span></div><div><span style="min-height: 10pt; font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.close()</span></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; font-size: 9pt;"><font color="#0000FF"># <span style="font-family: &quot;DejaVu Sans Mono&quot;; font-size: 9pt;">当指定的字节数大于读到文件尾的字节数时，或当指定的字节数小于0时，读取到文件尾部</span></font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh = open('a.txt', 'r')</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.readlines(-5)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">['1234567890\n', 'qwertyuiop\n', 'asdfghjkl\n', 'zxcvbnm\n']</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.close()</span></div></div><div><br/></div><div><br/></div><div><span style="font-weight: bold;">写文件</span></div><div>    写文件之前，必须打开文件。</div><div>    可以调用内置函数open()并且以只写方式、追加方式、读写方式打开文件。这样，返回的文件对象有两个用于写文件的方法：</div><div>1、write(text)</div><div>        用于将指定的字符串写入到文件中。方法的返回值是写入的字符数，即指定的字符串的长度。</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh = open('a.txt', 'w')</span><span style="color: rgb(0, 128, 0); font-family: &quot;DejaVu Sans Mono&quot;; font-size: 9pt;">  </span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.write('hello')</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">5</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.write(' python')</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">7</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.close()</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt;</span></div></div><div><br/></div><div>2、writelines(seq)</div><div>        用于将指定的字符串序列写入到文件中</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh = open('a.txt', 'w')</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.writelines(['qwe\n', 'asd\n', 'zxc\n'])</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.close()</span></div></div><div><br/></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">调用这个两个方法后，会将指定的字符串写入到缓存中，手动调用方法flush()或者close()，或者当写入的数据量大于等于缓存的容量时，缓存中的字符串才会被写入文件中</span></div><div><br/></div><div><br/></div><div><span style="font-weight: bold;">关闭文件</span></div><div>    文件在使用完毕后必须要关闭，这是因为文件对象会占用操作系统的资源，并且操作系统在某一时刻所能打开的文件数量也是有限的。</div><div>    读文件或写文件时都有可能发生异常，从而导致方法close()不会被调用，为了保证方法close()总能被调用，可以把读文件或写文件的操作放在try语句块中，把方法close()的调用放在finally中，</div><div>伪代码如下：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>try:</div><div>    读文件或写文件</div><div>finally:</div><div>    调用方法close()关闭文件</div></div><div><br/></div><div>由于文件对象实现了特殊方法__enter__()和__exit__()，所以文件对象可以作为上下文管理器。其中特殊方法__enter__()用于返回打开的文件对象，特殊方法__exit__()中关闭打开的文件，因此，上面的伪代码可以使用with语句实现：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>with 打开文件 as file:</div><div>    读写文件</div></div><div><br/></div><div><br/></div><div><span style="font-weight: bold;">文件指针</span></div><div>    任何文件对象都有一个文件指针，用于指向文件中的某个位置。</div><div>    读写文件时，是从文件指针的当前位置开始读写的，在读写过程中，文件指针会随之往后移动。</div><div><br/></div><div><br/></div><div>打开文件后，文件指针的位置</div><div>    以追加（'a'）方式打开文件后，文件指针指向文件的结尾位置；以其他方式打开文件后，文件指针指向文件的起始位置。</div><div>    <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">调用文件对象的方法tell()，返回文件指针的当前位置。</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh = open('a.txt', 'r')</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.tell()</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">0</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.close()</span></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh = open('a.txt', 'a') </span> <span style="font-family: &quot;DejaVu Sans Mono&quot;; font-size: 9pt;"><font color="#0000FF"># 追加方式文件指针在文件的末尾</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.tell()</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">11</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.close()</span></div></div><div><br/></div><div>在读写文件时，文件指针移动过程</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh = open('a.txt', 'r')</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.tell()       </span> <span style="font-family: &quot;DejaVu Sans Mono&quot;; font-size: 9pt;"><font color="#0000FF"># 起始位置是0，表示文件开始第一个字符的前一个位置</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">0</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.read(3)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'qwe'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.tell()</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">3</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.read(5)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'\nasd\n'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.tell()</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">8</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.close()</span></div></div><div><br/></div><div>自由移动文件指针</div><div>    可以调用文件对象的方法seek()，将文件指针自由移动到参数指定的位置</div><div>语法格式：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>seek(offset, [whence])</div></div><div><span style="background-color: transparent;">参数offset表示偏移量，可以为正数和负数，正数表示往后偏移，负数表示往前偏移。</span></div><div><span style="background-color: transparent;">参数whence是可选的，表示相对偏移位置，有三种取值：</span></div><div><span style="background-color: transparent;">1、os.SEEK_SET：相对文件的起始位置，值为0，默认值</span></div><div><span style="background-color: transparent;">2、os.SEEK_CUR：相对文件的当前位置，值为1</span></div><div><span style="background-color: transparent;">3、os.SEEK_END：相对文件的结尾位置，值为2</span></div><div><br/></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); color: rgb(227, 0, 0);-evernote-highlight:true;">只有以二进制方式打开的文件，才能支持上述三种方式，如果以文本方式打开的文件，只支持相对文件的起始位置。</span></span></div><div><br/></div><div><span style="font-size: 10pt;">如果要使用os.SEEK_SET、os.SEEK_CUR、os.SEEK_END，需要导入os模块，但是这三个属性其实就是相当于数值0、1、2</span></div><div><span style="font-size: 10pt;">os.SEEK_SET == 0</span></div><div><span style="font-size: 10pt;">os.SEEK_CUR == 1</span></div><div><span style="font-size: 10pt;">os.SEEK_END == 2</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh = open('a.txt', 'r')   <span style="font-family: &quot;DejaVu Sans Mono&quot;; font-size: 9pt; color: #0000ff;"># 因为是以文本方式打开的，因此只支持相对文件的起始位置</span></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.tell()</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">0</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.seek(5)             </span> <span style="font-family: &quot;DejaVu Sans Mono&quot;; font-size: 9pt;"><font style="color: rgb(0, 0, 255);"># 从文件的起始位置，偏移5个指针</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">5</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.tell()</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">5</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.read(2)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'56'</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.seek(0)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">0</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.tell()          <span style="font-family: &quot;DejaVu Sans Mono&quot;; font-size: 9pt; color: #0000ff;"># 从文件的起始位置，偏移0个指针，回到文件的起始位置</span></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">0</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.read(2)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">'01'</span></div><div><br/></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; font-size: 9pt;"><font color="#008000">&gt;&gt;&gt; fh.seek(-5, 2)                   </font><span style="font-family: &quot;DejaVu Sans Mono&quot;; font-size: 9pt;"><font style="color: rgb(0, 0, 255);"># 因为是以文本方式打开的，因此只支持相对文件的起始位置，另外两种方式就会抛出异常</font></span></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">Traceback (most recent call last):</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">io.UnsupportedOperation: can't do nonzero end-relative seeks</span></div></div><div><br/></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh = open('a.txt', 'rb')</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.tell()</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">0</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.seek(-2, 2)</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">20</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.tell()</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">20</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt;</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.read()</span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">b'j\n'</span></div><div><span style="min-height: 10pt; font-family: &quot;DejaVu Sans Mono&quot;; color: rgb(0, 128, 0); font-size: 9pt;">&gt;&gt;&gt; fh.close()</span></div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></span>
</div></body></html> 